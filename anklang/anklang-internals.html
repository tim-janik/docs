<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="The Anklang Project &lt;anklang.testbit.eu&gt;" />
  <meta name="keywords" content="Anklang, Linux, ALSA, JavaScript,
Scripting, IPC" />
  <title>ANKLANG Development Details</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #a73613; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #4c77cc; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #a73613; font-style: italic; } /* Comment */
    code span.cv { color: #a73613; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #60a0b0; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #a73613; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #4c77cc; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #a73613; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="style/faketex.css" />
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="style/mathjax-tex-svg.js"
  type="text/javascript"></script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">ANKLANG Development Details</h1>
<p class="author">The Anklang Project &lt;<a
href="https://anklang.testbit.eu/">anklang.testbit.eu</a>&gt;</p>
<p class="date">February 2024</p>
<p class="abstract"><b style="margin: 5em 0 1em; text-align: center; display: block;">Abstract<br /></b>
API documentation and development internals of the Anklang project.</p>
<div class="abstract">
<div class="abstract-title">Abstract</div>
API documentation and development internals of the Anklang project.
</div>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#anklang-development-details"
id="toc-anklang-development-details"><span
class="toc-section-number">1</span> ANKLANG Development Details</a>
<ul>
<li><a href="#ase---anklang-synthesis-engine"
id="toc-ase---anklang-synthesis-engine"><span
class="toc-section-number">1.1</span> ASE - Anklang synthesis engine</a>
<ul>
<li><a href="#serialization" id="toc-serialization"><span
class="toc-section-number">1.1.1</span> Serialization</a></li>
</ul></li>
<li><a href="#jsonipc" id="toc-jsonipc"><span
class="toc-section-number">1.2</span> Jsonipc</a>
<ul>
<li><a href="#callback-handling" id="toc-callback-handling"><span
class="toc-section-number">1.2.1</span> Callback Handling</a></li>
</ul></li>
<li><a href="#ase-class-inheritance-tree"
id="toc-ase-class-inheritance-tree"><span
class="toc-section-number">1.3</span> Ase Class Inheritance
Tree</a></li>
</ul></li>
<li><a href="#web-component-implementations"
id="toc-web-component-implementations"><span
class="toc-section-number">2</span> Web Component Implementations</a>
<ul>
<li><a href="#legacy-vue-components"
id="toc-legacy-vue-components"><span
class="toc-section-number">2.1</span> Legacy Vue Components</a></li>
</ul></li>
<li><a href="#ui-component-reference"
id="toc-ui-component-reference"><span
class="toc-section-number">3</span> UI Component Reference</a>
<ul>
<li><a href="#baboutdialog" id="toc-baboutdialog"><span
class="toc-section-number">3.1</span> <span id="BAboutDialog"
data-4search="ui/b/aboutdialog.js:BAboutDialog;section">BAboutDialog</span></a>
<ul>
<li><a href="#events" id="toc-events"><span
class="toc-section-number">3.1.1</span> Events:</a></li>
</ul></li>
<li><a href="#bpushbutton" id="toc-bpushbutton"><span
class="toc-section-number">3.2</span> <span id="BPushButton"
data-4search="ui/b/basics.js:BPushButton;section">BPushButton</span></a></li>
<li><a href="#bhflex" id="toc-bhflex"><span
class="toc-section-number">3.3</span> <span id="BHFlex"
data-4search="ui/b/basics.js:BHFlex;section">BHFlex</span></a></li>
<li><a href="#bvflex" id="toc-bvflex"><span
class="toc-section-number">3.4</span> <span id="BVFlex"
data-4search="ui/b/basics.js:BVFlex;section">BVFlex</span></a></li>
<li><a href="#bgrid" id="toc-bgrid"><span
class="toc-section-number">3.5</span> <span id="BGrid"
data-4search="ui/b/basics.js:BGrid;section">BGrid</span></a></li>
<li><a href="#bbuttonbar" id="toc-bbuttonbar"><span
class="toc-section-number">3.6</span> <span id="BButtonBar"
data-4search="ui/b/buttonbar.js:BButtonBar;section">BButtonBar</span></a>
<ul>
<li><a href="#slots" id="toc-slots"><span
class="toc-section-number">3.6.1</span> Slots:</a></li>
</ul></li>
<li><a href="#bchoiceinput" id="toc-bchoiceinput"><span
class="toc-section-number">3.7</span> <span id="BChoiceInput"
data-4search="ui/b/choiceinput.js:BChoiceInput;section">BChoiceInput</span></a>
<ul>
<li><a href="#props" id="toc-props"><span
class="toc-section-number">3.7.1</span> Props:</a></li>
<li><a href="#events-1" id="toc-events-1"><span
class="toc-section-number">3.7.2</span> Events:</a></li>
<li><a href="#bcliplist-class" id="toc-bcliplist-class"><span
class="toc-section-number">3.7.3</span> BClipList class</a></li>
</ul></li>
<li><a href="#bclipview" id="toc-bclipview"><span
class="toc-section-number">3.8</span> <span id="BClipView"
data-4search="ui/b/clipview.js:BClipView;section">BClipView</span></a></li>
<li><a href="#bcontextmenu" id="toc-bcontextmenu"><span
class="toc-section-number">3.9</span> <span id="BContextMenu"
data-4search="ui/b/contextmenu.js:BContextMenu;section">BContextMenu</span></a>
<ul>
<li><a href="#properties" id="toc-properties"><span
class="toc-section-number">3.9.1</span> Properties:</a></li>
<li><a href="#attributes" id="toc-attributes"><span
class="toc-section-number">3.9.2</span> Attributes:</a></li>
<li><a href="#events-2" id="toc-events-2"><span
class="toc-section-number">3.9.3</span> Events:</a></li>
<li><a href="#methods" id="toc-methods"><span
class="toc-section-number">3.9.4</span> Methods:</a></li>
<li><a href="#bcontextmenu-class" id="toc-bcontextmenu-class"><span
class="toc-section-number">3.9.5</span> BContextMenu class</a></li>
</ul></li>
<li><a href="#databubbleimpl" id="toc-databubbleimpl"><span
class="toc-section-number">3.10</span> <span id="DataBubbleImpl"
data-4search="ui/b/databubble.js:DataBubbleImpl;section">DataBubbleImpl</span></a>
<ul>
<li><a href="#databubbleiface-class"
id="toc-databubbleiface-class"><span
class="toc-section-number">3.10.1</span> DataBubbleIface class</a></li>
</ul></li>
<li><a href="#bdeviceeditor" id="toc-bdeviceeditor"><span
class="toc-section-number">3.11</span> <span id="BDeviceEditor"
data-4search="ui/b/deviceeditor.js:BDeviceEditor;section">BDeviceEditor</span></a></li>
<li><a href="#props-1" id="toc-props-1"><span
class="toc-section-number">3.12</span> Props:</a>
<ul>
<li><a href="#functions" id="toc-functions"><span
class="toc-section-number">3.12.1</span> Functions</a></li>
<li><a href="#component-class" id="toc-component-class"><span
class="toc-section-number">3.12.2</span> Component class</a></li>
<li><a href="#functions-1" id="toc-functions-1"><span
class="toc-section-number">3.12.3</span> Functions</a></li>
</ul></li>
<li><a href="#bicon" id="toc-bicon"><span
class="toc-section-number">3.13</span> <span id="BIcon"
data-4search="ui/b/icon.js:BIcon;section">BIcon</span></a>
<ul>
<li><a href="#props-2" id="toc-props-2"><span
class="toc-section-number">3.13.1</span> Props:</a></li>
</ul></li>
<li><a href="#bknob" id="toc-bknob"><span
class="toc-section-number">3.14</span> <span id="BKnob"
data-4search="ui/b/knob.js:BKnob;section">BKnob</span></a>
<ul>
<li><a href="#props-3" id="toc-props-3"><span
class="toc-section-number">3.14.1</span> Props:</a></li>
<li><a href="#implementation-notes" id="toc-implementation-notes"><span
class="toc-section-number">3.14.2</span> Implementation Notes</a></li>
<li><a href="#functions-2" id="toc-functions-2"><span
class="toc-section-number">3.14.3</span> Functions</a></li>
</ul></li>
<li><a href="#bmenubar" id="toc-bmenubar"><span
class="toc-section-number">3.15</span> <span id="BMenuBar"
data-4search="ui/b/menubar.js:BMenuBar;section">BMenuBar</span></a></li>
<li><a href="#bmenuitem" id="toc-bmenuitem"><span
class="toc-section-number">3.16</span> <span id="BMenuItem"
data-4search="ui/b/menuitem.js:BMenuItem;section">BMenuItem</span></a>
<ul>
<li><a href="#properties-1" id="toc-properties-1"><span
class="toc-section-number">3.16.1</span> Properties:</a></li>
<li><a href="#attributes-1" id="toc-attributes-1"><span
class="toc-section-number">3.16.2</span> Attributes:</a></li>
<li><a href="#events-3" id="toc-events-3"><span
class="toc-section-number">3.16.3</span> Events:</a></li>
<li><a href="#slots-1" id="toc-slots-1"><span
class="toc-section-number">3.16.4</span> Slots:</a></li>
</ul></li>
<li><a href="#bmenurow" id="toc-bmenurow"><span
class="toc-section-number">3.17</span> <span id="BMenuRow"
data-4search="ui/b/menurow.js:BMenuRow;section">BMenuRow</span></a>
<ul>
<li><a href="#props-4" id="toc-props-4"><span
class="toc-section-number">3.17.1</span> Props:</a></li>
<li><a href="#slots-2" id="toc-slots-2"><span
class="toc-section-number">3.17.2</span> Slots:</a></li>
</ul></li>
<li><a href="#bmenuseparator" id="toc-bmenuseparator"><span
class="toc-section-number">3.18</span> <span id="BMenuSeparator"
data-4search="ui/b/menuseparator.js:BMenuSeparator;section">BMenuSeparator</span></a></li>
<li><a href="#bmenutitle" id="toc-bmenutitle"><span
class="toc-section-number">3.19</span> <span id="BMenuTitle"
data-4search="ui/b/menutitle.js:BMenuTitle;section">BMenuTitle</span></a>
<ul>
<li><a href="#slots-3" id="toc-slots-3"><span
class="toc-section-number">3.19.1</span> Slots:</a></li>
</ul></li>
<li><a href="#bmore" id="toc-bmore"><span
class="toc-section-number">3.20</span> <span id="BMore"
data-4search="ui/b/more.js:BMore;section">BMore</span></a></li>
<li><a href="#bnumberinput" id="toc-bnumberinput"><span
class="toc-section-number">3.21</span> <span id="BNumberInput"
data-4search="ui/b/numberinput.js:BNumberInput;section">BNumberInput</span></a>
<ul>
<li><a href="#properties-2" id="toc-properties-2"><span
class="toc-section-number">3.21.1</span> Properties:</a></li>
<li><a href="#events-4" id="toc-events-4"><span
class="toc-section-number">3.21.2</span> Events:</a></li>
</ul></li>
<li><a href="#bobjecteditor" id="toc-bobjecteditor"><span
class="toc-section-number">3.22</span> <span id="BObjectEditor"
data-4search="ui/b/objecteditor.js:BObjectEditor;section">BObjectEditor</span></a>
<ul>
<li><a href="#properties-3" id="toc-properties-3"><span
class="toc-section-number">3.22.1</span> Properties:</a></li>
<li><a href="#events-5" id="toc-events-5"><span
class="toc-section-number">3.22.2</span> Events:</a></li>
</ul></li>
<li><a href="#bpartlist" id="toc-bpartlist"><span
class="toc-section-number">3.23</span> <span id="BPartList"
data-4search="ui/b/partlist.js:BPartList;section">BPartList</span></a>
<ul>
<li><a href="#constants" id="toc-constants"><span
class="toc-section-number">3.23.1</span> Constants</a></li>
<li><a href="#functions-3" id="toc-functions-3"><span
class="toc-section-number">3.23.2</span> Functions</a></li>
</ul></li>
<li><a href="#bpianoroll" id="toc-bpianoroll"><span
class="toc-section-number">3.24</span> <span id="BPianoRoll"
data-4search="ui/b/pianoroll.js:BPianoRoll;section">BPianoRoll</span></a>
<ul>
<li><a href="#functions-4" id="toc-functions-4"><span
class="toc-section-number">3.24.1</span> Functions</a></li>
</ul></li>
<li><a href="#bplaycontrols" id="toc-bplaycontrols"><span
class="toc-section-number">3.25</span> <span id="BPlayControls"
data-4search="ui/b/playcontrols.js:BPlayControls;section">BPlayControls</span></a></li>
<li><a href="#bpositionview" id="toc-bpositionview"><span
class="toc-section-number">3.26</span> <span id="BPositionView"
data-4search="ui/b/positionview.js:BPositionView;section">BPositionView</span></a>
<ul>
<li><a href="#props-5" id="toc-props-5"><span
class="toc-section-number">3.26.1</span> Props:</a></li>
</ul></li>
<li><a href="#bpropinput" id="toc-bpropinput"><span
class="toc-section-number">3.27</span> <span id="BPropInput"
data-4search="ui/b/propinput.js:BPropInput;section">BPropInput</span></a>
<ul>
<li><a href="#props-6" id="toc-props-6"><span
class="toc-section-number">3.27.1</span> Props:</a></li>
</ul></li>
<li><a href="#shellclass" id="toc-shellclass"><span
class="toc-section-number">3.28</span> <span id="ShellClass"
data-4search="ui/b/shell.vue.js:ShellClass;section">ShellClass</span></a>
<ul>
<li><a href="#shellclass-class" id="toc-shellclass-class"><span
class="toc-section-number">3.28.1</span> ShellClass class</a></li>
</ul></li>
<li><a href="#bstatusbar" id="toc-bstatusbar"><span
class="toc-section-number">3.29</span> <span id="BStatusBar"
data-4search="ui/b/statusbar.js:BStatusBar;section">BStatusBar</span></a></li>
<li><a href="#bswitchinput" id="toc-bswitchinput"><span
class="toc-section-number">3.30</span> <span id="BSwitchInput"
data-4search="ui/b/switchinput.js:BSwitchInput;section">BSwitchInput</span></a>
<ul>
<li><a href="#properties-4" id="toc-properties-4"><span
class="toc-section-number">3.30.1</span> Properties:</a></li>
<li><a href="#events-6" id="toc-events-6"><span
class="toc-section-number">3.30.2</span> Events:</a></li>
</ul></li>
<li><a href="#btextinput" id="toc-btextinput"><span
class="toc-section-number">3.31</span> <span id="BTextInput"
data-4search="ui/b/textinput.js:BTextInput;section">BTextInput</span></a>
<ul>
<li><a href="#properties-5" id="toc-properties-5"><span
class="toc-section-number">3.31.1</span> Properties:</a></li>
<li><a href="#events-7" id="toc-events-7"><span
class="toc-section-number">3.31.2</span> Events:</a></li>
</ul></li>
<li><a href="#btoggle" id="toc-btoggle"><span
class="toc-section-number">3.32</span> <span id="BToggle"
data-4search="ui/b/toggle.js:BToggle;section">BToggle</span></a>
<ul>
<li><a href="#props-7" id="toc-props-7"><span
class="toc-section-number">3.32.1</span> Props:</a></li>
<li><a href="#events-8" id="toc-events-8"><span
class="toc-section-number">3.32.2</span> Events:</a></li>
<li><a href="#huesaturation-class" id="toc-huesaturation-class"><span
class="toc-section-number">3.32.3</span> HueSaturation class</a></li>
<li><a href="#functions-5" id="toc-functions-5"><span
class="toc-section-number">3.32.4</span> Functions</a></li>
</ul></li>
<li><a href="#workerclip" id="toc-workerclip"><span
class="toc-section-number">3.33</span> <span id="WorkerClip"
data-4search="ui/host.js:WorkerClip;section">WorkerClip</span></a></li>
<li><a href="#workerhost" id="toc-workerhost"><span
class="toc-section-number">3.34</span> <span id="WorkerHost"
data-4search="ui/host.js:WorkerHost;section">WorkerHost</span></a>
<ul>
<li><a href="#workerhost-class" id="toc-workerhost-class"><span
class="toc-section-number">3.34.1</span> WorkerHost class</a></li>
</ul></li>
</ul></li>
<li><a href="#name" id="toc-name"><span
class="toc-section-number">4</span> NAME</a></li>
<li><a href="#synopsis" id="toc-synopsis"><span
class="toc-section-number">5</span> SYNOPSIS</a></li>
<li><a href="#description" id="toc-description"><span
class="toc-section-number">6</span> DESCRIPTION</a></li>
<li><a href="#options" id="toc-options"><span
class="toc-section-number">7</span> OPTIONS</a>
<ul>
<li><a href="#focusguard" id="toc-focusguard"><span
class="toc-section-number">7.1</span> <span id="FocusGuard"
data-4search="ui/kbd.js:FocusGuard;section">FocusGuard</span></a>
<ul>
<li><a href="#constants-1" id="toc-constants-1"><span
class="toc-section-number">7.1.1</span> Constants</a></li>
<li><a href="#functions-6" id="toc-functions-6"><span
class="toc-section-number">7.1.2</span> Functions</a></li>
</ul></li>
<li><a href="#litcomponent" id="toc-litcomponent"><span
class="toc-section-number">7.2</span> <span id="LitComponent"
data-4search="ui/little.js:LitComponent;section">LitComponent</span></a>
<ul>
<li><a href="#props-8" id="toc-props-8"><span
class="toc-section-number">7.2.1</span> Props:</a></li>
<li><a href="#constants-2" id="toc-constants-2"><span
class="toc-section-number">7.2.2</span> Constants</a></li>
<li><a href="#functions-7" id="toc-functions-7"><span
class="toc-section-number">7.2.3</span> Functions</a></li>
<li><a href="#constants-3" id="toc-constants-3"><span
class="toc-section-number">7.2.4</span> Constants</a></li>
<li><a href="#functions-8" id="toc-functions-8"><span
class="toc-section-number">7.2.5</span> Functions</a></li>
<li><a href="#functions-9" id="toc-functions-9"><span
class="toc-section-number">7.2.6</span> Functions</a></li>
</ul></li>
<li><a href="#scripthost" id="toc-scripthost"><span
class="toc-section-number">7.3</span> <span id="ScriptHost"
data-4search="ui/script.js:ScriptHost;section">ScriptHost</span></a>
<ul>
<li><a href="#functions-10" id="toc-functions-10"><span
class="toc-section-number">7.3.1</span> Functions</a></li>
<li><a href="#functions-11" id="toc-functions-11"><span
class="toc-section-number">7.3.2</span> Functions</a></li>
<li><a href="#pointerdrag-class" id="toc-pointerdrag-class"><span
class="toc-section-number">7.3.3</span> PointerDrag class</a></li>
<li><a href="#vue_mixins-class" id="toc-vue_mixins-class"><span
class="toc-section-number">7.3.4</span> vue_mixins class</a></li>
<li><a href="#constants-4" id="toc-constants-4"><span
class="toc-section-number">7.3.5</span> Constants</a></li>
<li><a href="#functions-12" id="toc-functions-12"><span
class="toc-section-number">7.3.6</span> Functions</a></li>
</ul></li>
<li><a href="#asecachingwrapper" id="toc-asecachingwrapper"><span
class="toc-section-number">7.4</span> <span id="AseCachingWrapper"
data-4search="ui/wrapper.js:AseCachingWrapper;section">AseCachingWrapper</span></a>
<ul>
<li><a href="#asecachingwrapper-class"
id="toc-asecachingwrapper-class"><span
class="toc-section-number">7.4.1</span> AseCachingWrapper class</a></li>
<li><a href="#constants-5" id="toc-constants-5"><span
class="toc-section-number">7.4.2</span> Constants</a></li>
<li><a href="#functions-13" id="toc-functions-13"><span
class="toc-section-number">7.4.3</span> Functions</a></li>
<li><a href="#functions-14" id="toc-functions-14"><span
class="toc-section-number">7.4.4</span> Functions</a></li>
</ul></li>
</ul></li>
<li><a href="#releasing" id="toc-releasing"><span
class="toc-section-number">8</span> Releasing</a>
<ul>
<li><a href="#versioning" id="toc-versioning"><span
class="toc-section-number">8.1</span> Versioning</a></li>
<li><a href="#release-assets" id="toc-release-assets"><span
class="toc-section-number">8.2</span> Release Assets</a></li>
</ul></li>
<li><a href="#appendix" id="toc-appendix"><span
class="toc-section-number">9</span> Appendix</a>
<ul>
<li><a href="#one-dimensional-cubic-interpolation"
id="toc-one-dimensional-cubic-interpolation"><span
class="toc-section-number">9.1</span> One-dimensional Cubic
Interpolation</a></li>
<li><a href="#modifier-keys" id="toc-modifier-keys"><span
class="toc-section-number">9.2</span> Modifier Keys</a></li>
</ul></li>
</ul>
</nav>
<section id="anklang-development-details" class="level1"
data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> ANKLANG
Development Details</h1>
<p>Technically, Anklang consists of a user interface front-end based on
web technologies (HTML, DOM, CSS, JavaScript, Lit) and a synthesis
engine backend written in C++.</p>
<section id="ase---anklang-synthesis-engine" class="level2"
data-number="1.1">
<h2 data-number="1.1"><span class="header-section-number">1.1</span> ASE
- Anklang synthesis engine</h2>
<p>The <code>ase/</code> subdirectory contains the C++ implementation of
the <code>AnklangSynthEngine</code> executable which contains the core
component for audio data processing and audio plugin handling. It
interfaces with the HTML DOM based user interface via an IPC layer with
JSON messages that reflect the C++ API.</p>
<p>The synthesis engine can load various audio rendering plugins which
are executed in audio rendering worker threads. The main synthesis
engine thread coordinates synchronization and interafces between the
engine and the UI via an IPC interface over a web-socket that uses
remote method calls and event delivery marshalled as JSON messages.</p>
<section id="serialization" class="level3" data-number="1.1.1">
<h3 data-number="1.1.1"><span class="header-section-number">1.1.1</span>
Serialization</h3>
<p>Building on <a href="#jsonipc">Jsonipc</a>, a small serializaiton
framework provided by <a
href="https://github.com/tim-janik/anklang/blob/master/ase/serialize.hh">ase/serialize.hh</a>
is used to marshal values, structs, enums and classes to/from JSON. This
is used to store preferences and project data. The intended usage is as
follows:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>  <span class="bu">std::</span>string jsontext <span class="op">=</span> Ase<span class="op">::</span>json_stringify <span class="op">(</span>somevalue<span class="op">);</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">bool</span> success <span class="op">=</span> Ase<span class="op">::</span>json_parse <span class="op">(</span>jsontext<span class="op">,</span> somevalue<span class="op">);</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">// The JSON root will be of type &#39;object&#39; if somevalue is a class instance</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="bu">std::</span>string s<span class="op">;</span>                                          <span class="co">// s contains:</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  s <span class="op">=</span> json_stringify <span class="op">(</span><span class="kw">true</span><span class="op">);</span>                              <span class="co">// true</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  s <span class="op">=</span> json_stringify <span class="op">(-</span><span class="fl">0.17</span><span class="op">);</span>                             <span class="co">// -0.17</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  s <span class="op">=</span> json_stringify <span class="op">(</span><span class="dv">32768</span><span class="op">);</span>                             <span class="co">// 32768</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  s <span class="op">=</span> json_stringify <span class="op">(</span>Ase<span class="op">::</span>Error<span class="op">::</span>IO<span class="op">);</span>                    <span class="co">// &quot;Ase.Error.IO&quot;</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  s <span class="op">=</span> json_stringify <span class="op">(</span>String <span class="op">(</span><span class="st">&quot;STRing&quot;</span><span class="op">));</span>                 <span class="co">// &quot;STRing&quot;</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  s <span class="op">=</span> json_stringify <span class="op">(</span>ValueS <span class="op">({</span> <span class="kw">true</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="st">&quot;HI&quot;</span> <span class="op">}));</span>        <span class="co">// [true,5,&quot;HI&quot;]</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  s <span class="op">=</span> json_stringify <span class="op">(</span>ValueR <span class="op">({</span> <span class="op">{</span><span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">},</span> <span class="op">{</span><span class="st">&quot;b&quot;</span><span class="op">,</span> <span class="st">&quot;B&quot;</span><span class="op">}</span> <span class="op">}));</span> <span class="co">// {&quot;a&quot;:1,&quot;b&quot;:&quot;B&quot;}</span></span></code></pre></div>
<p>In the above examples, <code>Ase::Error::IO</code> can be serialized
because it is registered as <code>Jsonipc::Enum&lt;Ase::Error&gt;</code>
with its enum values. The same works for serializable classes registered
through <code>Jsonipc::Serializable&lt;SomeClass&gt;</code>.</p>
<p>[_] Serialization of class instances will have to depend on the
Scope/InstanceMap, so instance pointers in copyable classes registered
as <code>Jsonipc::Serializable&lt;&gt;</code> can be marshalled into a
JsonValue (as <code>{$id,$class}</code> pair), then be resolved into an
InstanceP stored in an Ase::Value and from there be marshalled into a
persistent relative object link for project data storage.</p>
</section>
</section>
<section id="jsonipc" class="level2" data-number="1.2">
<h2 data-number="1.2"><span class="header-section-number">1.2</span>
Jsonipc</h2>
<p>Jsonipc is a header-only IPC layer that marshals C++ calls to JSON
messages defined in <a
href="https://github.com/tim-janik/anklang/blob/master/jsonipc/jsonipc.hh">jsonipc/jsonipc.hh</a>.
The needed registration code is very straight forward to write manually,
but can also be auto-genrated by using <a
href="https://github.com/tim-janik/anklang/blob/master/jsonipc/cxxjip.py">jsonipc/cxxjip.py</a>
which parses the exported API using <a
href="https://github.com/CastXML/CastXML">CastXML</a>.</p>
<p>The Anklang API for remote method calls is defined in <a
href="https://github.com/tim-janik/anklang/blob/master/ase/api.hh">api.hh</a>.
Each class with its methods, struct with its fields and enum with its
values is registered as a Jsonipc interface using conscise C++ code that
utilizes templates to derive the needed type information.</p>
<p>The corresponding Javascript code to use <code>api.hh</code> via <a
href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/async_function">async</a>
remote method calls is generated via
<code>Jsonipc::ClassPrinter::to_string()</code> by
<code>AnklangSynthEngine --js-api</code>.</p>
<ul>
<li>[√] <code>shared_ptr&lt;Class&gt; from_json()</code> - lookup by id
in InstanceMap or use <code>Scope::make_shared</code> for
Serializable.</li>
<li>[√] <code>to_json (const shared_ptr&lt;Class&gt; &amp;p)</code> -
marshal Serializable or {id} from InstanceMap.</li>
<li>[√] <code>Class* from_json()</code> - return
<code>&amp;*shared_ptr&lt;Class&gt;</code></li>
<li>[√] <code>to_json (Class *r)</code> - supports Serializable or
<code>Class-&gt;shared_from_this()</code> wrapping.</li>
<li>[√] <code>Class&amp; from_json()</code> - return
<code>*shared_ptr&lt;Class&gt;</code>, throws on <code>nullptr</code>.
<strong>!!!</strong></li>
<li>[√] <code>to_json (const Class &amp;v)</code> - return
<code>to_json&lt;Class*&gt;()</code></li>
<li>[√] No uses are made of copy-ctor implementations.</li>
<li>[√] Need virtual ID serialization API on InstanceMap.</li>
<li>[√] Add <code>jsonvalue_as_string()</code> for debugging
purposes.</li>
</ul>
<section id="callback-handling" class="level3" data-number="1.2.1">
<h3 data-number="1.2.1"><span class="header-section-number">1.2.1</span>
Callback Handling</h3>
<p>Javascript can register/unregister remote Callbacks with
<em>create</em> and <em>remove</em>. C++ sends events to inform about a
remote Callback being <em>called</em> or unregistered
<em>killed</em>.</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span>    Jsonapi<span class="op">/</span>Trigger<span class="op">/</span>create <span class="op">(</span>id<span class="op">);</span>     <span class="co">// JS-&gt;C++</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span>    Jsonapi<span class="op">/</span>Trigger<span class="op">/</span>remove <span class="op">(</span>id<span class="op">);</span>     <span class="co">// JS-&gt;C++</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span>    Jsonapi<span class="op">/</span>Trigger<span class="op">/</span>_<span class="op">&lt;</span>id<span class="op">&gt;</span>  <span class="op">([...]);</span>  <span class="co">// C++-&gt;JS</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span>    Jsonapi<span class="op">/</span>Trigger<span class="op">/</span>killed <span class="op">(</span>id<span class="op">);</span>     <span class="co">// C++-&gt;JS</span></span></code></pre></div>
</section>
</section>
<section id="ase-class-inheritance-tree" class="level2"
data-number="1.3">
<h2 data-number="1.3"><span class="header-section-number">1.3</span> Ase
Class Inheritance Tree</h2>
<pre><code>Ase::SharedBase
   |
   +Ase::Emittable
      |
      +Ase::Property
      |
      +Ase::Object
         |
         +Ase::Gadget
         |  |
         |  +Ase::Device
         |  |  |
         |  |  +Ase::NativeDevice
         |  |  |  |
         |  |  |  +Ase::NativeDeviceImpl
         |  |  |
         |  |  +Ase::Track
         |  |  |  |
         |  |  |  +Ase::TrackImpl
         |  |  |
         |  |  +Ase::Project
         |  |  |  |
         |  |  |  +Ase::ProjectImpl
         |  |  |
         |  |  +Ase::ClapDeviceImpl
         |  |
         |  +Ase::Clip
         |  |  |
         |  |  +Ase::ClipImpl
         |  |
         |  +Ase::Monitor
         |  |  |
         |  |  +Ase::MonitorImpl
         |  |
         |  +Ase::Server
         |  |  |
         |  |  +Ase::ServerImpl
         |  |
         |  +Ase::GadgetImpl
         |
         +Ase::ResourceCrawler
            |
            +Ase::FileCrawler</code></pre>
</section>
</section>
<section id="web-component-implementations" class="level1"
data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Web
Component Implementations</h1>
<p>The user interface components used in Anklang are implemented as <a
href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements">custom
HTML elements</a> and are generally composed of a single file that
provides:</p>
<ol type="a">
<li>A brief documentation block;</li>
<li>CSS style information, that is extracted at build time via <a
href="https://tim-janik.github.io/docs/anklang/jsextract_8js.html">JsExtract</a>;</li>
<li>An HTML layout specified with <a
href="https://lit.dev/docs/templates/expressions/">lit-html
expressions</a>;</li>
<li>An assorted JavaScript class that defines a new custom HTML element,
possibly via <a href="https://lit.dev/docs/">Lit</a>.</li>
</ol>
<p>Simple components that have no or at most one child element and do
not require complex HTML layouts with lit-html can be implemented
directly via <a
href="https://developer.mozilla.org/en-US/docs/Web/API/CustomElementRegistry/define">customElements.define()</a>.</p>
<p>Components with complex layouts that need lit-html or that act as
containers with several <a
href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/slot">HTMLSlotElement</a>s
(for multiple types of children) which require a <a
href="https://developer.mozilla.org/en-US/docs/Web/API/ShadowRoot">ShadowRoot</a>,
should be implemented as LitElements by extending <a
href="https://tim-janik.github.io/docs/anklang/little_8js.html#LitComponent">LitComponent</a>
(our convenience wrapper around <a
href="https://lit.dev/docs/api/LitElement/">LitElement</a>.</p>
<p>Note that <a
href="https://lit.dev/docs/components/defining/#a-lit-component-is-an-html-element">a
Lit component is an HTML element</a>, it extends <a
href="https://lit.dev/docs/api/ReactiveElement/">ReactiveElement</a>
which always extends <a
href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement">HTMLElement</a>
and none of the other <a
href="https://developer.mozilla.org/en-US/docs/Web/API/HTML_DOM_API#html_element_interfaces_2">HTML
element interfaces</a>.</p>
<section id="legacy-vue-components" class="level2" data-number="2.1">
<h2 data-number="2.1"><span class="header-section-number">2.1</span>
Legacy Vue Components</h2>
<p>Some components are still implemented via Vue and are slowly phased
out. We often use <code>&lt;canvas&gt;</code> elements for Anklang
specific displays, and Vue canvas handling comes with certain
caveats:</p>
<ol type="1">
<li>Use of the <code>Util.vue_mixins.dom_updates</code> mixin (now
default) allows to trigger the <code>dom_update()</code> component
method for <code>$forceUpdate()</code> invocations and related
events.</li>
<li>A <code>methods: { dom_update() {}, }</code> component entry should
be provided that triggers the actual canvas rendering logic.</li>
<li>Using a <code>document.fonts.ready</code> promise, Anklang
re-renders all Vue components via <code>$forceUpdate()</code> once all
webfonts have been loaded, <code>&lt;canvas&gt;</code> elements
containing text usually need to re-render themselves in this case.</li>
</ol>
<p><strong>Envue components:</strong></p>
<p>Envue components are created to simplify some of the oddities of
dealing with Vue-3 components. The function
<code>Envue.Component.vue_export</code> creates a Vue component
definition, so that the Vue component instance (<code>$vm</code>) is
tied to an <code>Envue.Component</code> instance (<code>$object</code>).
Notes:</p>
<ul>
<li>The Vue lifetime component can be accessed as
<code>$object.$vm</code>.</li>
<li>The Envue component can be accessed as
<code>$vm.$object</code>.</li>
<li>Accesses to <code>$vm.*</code> fields e.g. from within a
<code>&lt;template/&gt;</code> definition are forwarded to access
<code>$object.*</code> fields.</li>
<li>Vue3 components are Proxy objects, <em>but</em> assignments to these
Proxy objects is <em>not</em> reactive.</li>
<li>To construct reactive instance data with async functions, use
<code>observable_from_getters()</code>.</li>
</ul>
<p>Vue uses a template compiler to construct a <a
href="https://v3.vuejs.org/guide/render-function.html#complete-example">render()</a>
function from <a
href="https://v3.vuejs.org/guide/template-syntax.html#raw-html">HTML</a>
<code>&lt;template/&gt;</code> strings. The <a
href="https://v3.vuejs.org/guide/template-syntax.html#javascript-expressions">Javascript
expressions</a> in templates are sandboxed and limited in scope, but may
refer to Vue component properties that are exposed through
<code>hasOwnProperty()</code>. In order to support Envue instance
methods and fields in template expressions, all members present after
Envue construction are forwarded into the Vue component.</p>
</section>
</section>
<section id="ui-component-reference" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> UI
Component Reference</h1>
<section id="baboutdialog" class="level2" data-number="3.1">
<h2 data-number="3.1"><span class="header-section-number">3.1</span>
<span id="BAboutDialog"
data-4search="ui/b/aboutdialog.js:BAboutDialog;section">BAboutDialog</span></h2>
<p>The &lt;b-aboutdialog&gt; element is a modal [b-dialog] that displays
version information about Anklang.</p>
<section id="events" class="level3" data-number="3.1.1">
<h3 data-number="3.1.1"><span class="header-section-number">3.1.1</span>
Events:</h3>
<dl>
<dt><em>close</em></dt>
<dd>
A <em>close</em> event is emitted once the "Close" button activated.
</dd>
</dl>
</section>
</section>
<section id="bpushbutton" class="level2" data-number="3.2">
<h2 data-number="3.2"><span class="header-section-number">3.2</span>
<span id="BPushButton"
data-4search="ui/b/basics.js:BPushButton;section">BPushButton</span></h2>
<p>The &lt;push-button&gt; element is a wrapper for an ordinary
HTMLElement. It is styled like a &lt;button&gt; and can behave like it,
but cannot become a focus element.</p>
</section>
<section id="bhflex" class="level2" data-number="3.3">
<h2 data-number="3.3"><span class="header-section-number">3.3</span>
<span id="BHFlex"
data-4search="ui/b/basics.js:BHFlex;section">BHFlex</span></h2>
<p>The &lt;h-flex&gt; element is a horizontal <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/flex">flex</a>
container element. See also the <a
href="https://flexbox.malven.co/">Flex visual cheatsheet</a>.</p>
</section>
<section id="bvflex" class="level2" data-number="3.4">
<h2 data-number="3.4"><span class="header-section-number">3.4</span>
<span id="BVFlex"
data-4search="ui/b/basics.js:BVFlex;section">BVFlex</span></h2>
<p>The &lt;v-flex&gt; element is a vertical <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/flex">flex</a>
container element. See also the <a
href="https://flexbox.malven.co/">Flex visual cheatsheet</a>.</p>
</section>
<section id="bgrid" class="level2" data-number="3.5">
<h2 data-number="3.5"><span class="header-section-number">3.5</span>
<span id="BGrid"
data-4search="ui/b/basics.js:BGrid;section">BGrid</span></h2>
<p>The &lt;c-grid&gt; element is a simple <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/grid">grid</a>
container element. See also <a
href="https://www.w3.org/TR/css-grid-1/#grid-containers">Grid
Container</a> and the <a href="https://grid.malven.co/">Grid visual
cheatsheet</a>.</p>
</section>
<section id="bbuttonbar" class="level2" data-number="3.6">
<h2 data-number="3.6"><span class="header-section-number">3.6</span>
<span id="BButtonBar"
data-4search="ui/b/buttonbar.js:BButtonBar;section">BButtonBar</span></h2>
<p>The &lt;b-buttonbar&gt; element is a container for tight packing of
buttons.</p>
<section id="slots" class="level3" data-number="3.6.1">
<h3 data-number="3.6.1"><span class="header-section-number">3.6.1</span>
Slots:</h3>
<dl>
<dt><em>slot</em></dt>
<dd>
All contents passed into this element will be packed tightly and styled
as buttons.
</dd>
</dl>
</section>
</section>
<section id="bchoiceinput" class="level2" data-number="3.7">
<h2 data-number="3.7"><span class="header-section-number">3.7</span>
<span id="BChoiceInput"
data-4search="ui/b/choiceinput.js:BChoiceInput;section">BChoiceInput</span></h2>
<p>The &lt;b-choiceinput&gt; element provides a choice popup to choose
from a set of options. It supports the Vue <a
href="https://vuejs.org/v2/guide/components-custom-events.html#Customizing-Component-v-model">v-model</a>
protocol by emitting an <code>input</code> event on value changes and
accepting inputs via the <code>value</code> prop.</p>
<section id="props" class="level3" data-number="3.7.1">
<h3 data-number="3.7.1"><span class="header-section-number">3.7.1</span>
Props:</h3>
<dl>
<dt><em>value</em></dt>
<dd>
The choice value to be displayed.
</dd>
<dt><em>choices</em></dt>
<dd>
List of choices: <code>[ { icon, label, blurb }... ]</code>
</dd>
<dt><em>title</em></dt>
<dd>
Optional title for the popup menu.
</dd>
<dt><em>label</em></dt>
<dd>
A label used to extend the tip attached to the choice component.
</dd>
<dt><em>small</em></dt>
<dd>
Reduce padding and use small layout.
</dd>
<dt><em>prop</em></dt>
<dd>
If <code>label</code> is unspecified, it can be fetched from
<code>prop-&gt;label</code> instead.
</dd>
</dl>
</section>
<section id="events-1" class="level3" data-number="3.7.2">
<h3 data-number="3.7.2"><span class="header-section-number">3.7.2</span>
Events:</h3>
<dl>
<dt><em>valuechange</em></dt>
<dd>
Event emitted whenever the value changes, which is provided as
<code>event.target.value</code>.
</dd>
</dl>
</section>
<section id="bcliplist-class" class="level3" data-number="3.7.3">
<h3 data-number="3.7.3"><span class="header-section-number">3.7.3</span>
BClipList class</h3>
<dl>
<dt><em>class</em> <span id="BClipList"
data-4search="ui/b/cliplist.js:BClipList;class"><strong>BClipList</strong></span></dt>
<dd>
The &lt;b-cliplist&gt; element container holds BClipView elements.
</dd>
</dl>
</section>
</section>
<section id="bclipview" class="level2" data-number="3.8">
<h2 data-number="3.8"><span class="header-section-number">3.8</span>
<span id="BClipView"
data-4search="ui/b/clipview.js:BClipView;section">BClipView</span></h2>
<p>The &lt;b-clipview&gt; element displays a small view of a MIDI
clip.</p>
</section>
<section id="bcontextmenu" class="level2" data-number="3.9">
<h2 data-number="3.9"><span class="header-section-number">3.9</span>
<span id="BContextMenu"
data-4search="ui/b/contextmenu.js:BContextMenu;section">BContextMenu</span></h2>
<p>The &lt;b-contextmenu&gt; element implements a modal popup that
displays contextmenu choices, see <a
href="menuitem_8js.html#BMenuItem">BMenuItem</a>, <a
href="menurow_8js.html#BMenuRow">BMenuRow</a>, <a
href="menutitle_8js.html#BMenuTitle">BMenuTitle</a> and <a
href="menuseparator_8js.html#BMenuSeparator">BMenuSeparator</a>. Using
the <code>popup()</code> method, the menu can be popped up from the
parent component, and setting up a <code>.activate</code> handler can be
used to handle menuitem actions. Example:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode html"><code class="sourceCode html"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> </span><span class="er">@</span><span class="ot">contextmenu</span><span class="op">=</span><span class="st">&quot;e =&gt; querySelector(&#39;b-contextmenu&#39;).popup (e)&quot;</span><span class="dt">&gt;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">b-contextmenu</span><span class="ot"> </span><span class="er">.</span><span class="ot">activate</span><span class="op">=</span><span class="st">&quot;menuactivation&quot;</span><span class="dt">&gt;</span>...<span class="dt">&lt;/</span><span class="kw">b-contextmenu</span><span class="dt">&gt;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span></code></pre></div>
<p>Note that keyboard presses, mouse clicks, drag selections and event
bubbling can all cause menu item clicks and contextmenu activation. In
order to deduplicate multiple events that arise from the same user
interaction, <em>one</em> popup request and <em>one</em> click
activation is processed per animation frame.</p>
<section id="properties" class="level3" data-number="3.9.1">
<h3 data-number="3.9.1"><span class="header-section-number">3.9.1</span>
Properties:</h3>
<dl>
<dt><em>.activate(uri)</em></dt>
<dd>
Property callback which is called once a menu item is activated.
</dd>
<dt><em>.isactive (uri)</em> -&gt; bool</dt>
<dd>
Property callback used to check if a particular menu item should stay
active or be disabled.
</dd>
</dl>
</section>
<section id="attributes" class="level3" data-number="3.9.2">
<h3 data-number="3.9.2"><span class="header-section-number">3.9.2</span>
Attributes:</h3>
<dl>
<dt><em>xscale</em></dt>
<dd>
Consider a wider area than the context menu width for popup positioning.
</dd>
<dt><em>yscale</em></dt>
<dd>
Consider a taller area than the context menu height for popup
positioning.
</dd>
</dl>
</section>
<section id="events-2" class="level3" data-number="3.9.3">
<h3 data-number="3.9.3"><span class="header-section-number">3.9.3</span>
Events:</h3>
<dl>
<dt><em>click (event)</em></dt>
<dd>
Event signaling activation of a menu item, the <code>uri</code> can be
found via <code>event.target.uri</code>.
</dd>
<dt><em>close (event)</em></dt>
<dd>
Event signaling closing of the menu, regardless of whether menu item
activation occoured or not.
</dd>
</dl>
</section>
<section id="methods" class="level3" data-number="3.9.4">
<h3 data-number="3.9.4"><span class="header-section-number">3.9.4</span>
Methods:</h3>
<dl>
<dt><em>popup (event, { origin, focus_uri, data-contextmenu })</em></dt>
<dd>
Popup the contextmenu, propagation of <code>event</code> is halted and
the event coordinates or target is
</dd>
<dd>
used for positioning unless <code>origin</code> is given.
</dd>
<dd>
The <code>origin</code> is a reference DOM element to use for drop-down
positioning.
</dd>
<dd>
The <code>focus_uri</code> is a &lt;b-menuitem/&gt; URI to receive focus
after popup.
</dd>
<dd>
The <code>data-contextmenu</code> element (or <code>origin</code>) has
the <code>data-contextmenu=true</code> attribute assigned during popup.
</dd>
<dt><em>close()</em></dt>
<dd>
Hide the contextmenu.
</dd>
<dt><em>map_kbd_hotkeys (active)</em></dt>
<dd>
Activate (deactivate) the <code>kbd=...</code> hotkeys specified in menu
items.
</dd>
</dl>
</section>
<section id="bcontextmenu-class" class="level3" data-number="3.9.5">
<h3 data-number="3.9.5"><span class="header-section-number">3.9.5</span>
BContextMenu class</h3>
<dl>
<dt><em>class</em> <span id="BContextMenu"
data-4search="ui/b/contextmenu.js:BContextMenu;class"><strong>BContextMenu</strong></span></dt>
<dd>
<p>…</p>
<dl>
<dt><span id="map_kbd_hotkeys"
data-4search="ui/b/contextmenu.js:map_kbd_hotkeys;func"><strong><code>map_kbd_hotkeys</code></strong></span>
<code>(</code><em>active</em><code>)</code></dt>
<dd>
Activate or disable the <code>kbd=...</code> hotkeys in menu items.
</dd>
<dt><span id="find_menuitem"
data-4search="ui/b/contextmenu.js:find_menuitem;func"><strong><code>find_menuitem</code></strong></span>
<code>(</code><em>uri</em><code>)</code></dt>
<dd>
Find a menuitem via its <code>uri</code>.
</dd>
</dl>
</dd>
</dl>
</section>
</section>
<section id="databubbleimpl" class="level2" data-number="3.10">
<h2 data-number="3.10"><span class="header-section-number">3.10</span>
<span id="DataBubbleImpl"
data-4search="ui/b/databubble.js:DataBubbleImpl;section">DataBubbleImpl</span></h2>
<p>The <strong>DataBubbleImpl</strong> and
<strong>DataBubbleIface</strong> classes implement the logic required to
extract and display <code>data-bubble=""</code> tooltip popups on mouse
hover.</p>
<section id="databubbleiface-class" class="level3" data-number="3.10.1">
<h3 data-number="3.10.1"><span
class="header-section-number">3.10.1</span> DataBubbleIface class</h3>
<dl>
<dt><em>class</em> <span id="DataBubbleIface"
data-4search="ui/b/databubble.js:DataBubbleIface;class"><strong>DataBubbleIface</strong></span></dt>
<dd>
<p>…</p>
<dl>
<dt><span id="update"
data-4search="ui/b/databubble.js:update;func"><strong><code>update</code></strong></span>
<code>(</code><em>element, text</em><code>)</code></dt>
<dd>
Set the <code>data-bubble</code> attribute of <code>element</code> to
<code>text</code> or force its callback
</dd>
<dt><span id="callback"
data-4search="ui/b/databubble.js:callback;func"><strong><code>callback</code></strong></span>
<code>(</code><em>element, callback</em><code>)</code></dt>
<dd>
Assign a callback function to fetch the <code>data-bubble</code>
attribute of <code>element</code>
</dd>
<dt><span id="force"
data-4search="ui/b/databubble.js:force;func"><strong><code>force</code></strong></span>
<code>(</code><em>element</em><code>)</code></dt>
<dd>
Force <code>data-bubble</code> to be shown for <code>element</code>
</dd>
<dt><span id="unforce"
data-4search="ui/b/databubble.js:unforce;func"><strong><code>unforce</code></strong></span>
<code>(</code><em>element</em><code>)</code></dt>
<dd>
Cancel forced <code>data-bubble</code> for <code>element</code>
</dd>
<dt><span id="clear"
data-4search="ui/b/databubble.js:clear;func"><strong><code>clear</code></strong></span>
<code>(</code><em>element</em><code>)</code></dt>
<dd>
Reset the <code>data-bubble</code> attribute, its callback and cancel a
forced bubble
</dd>
</dl>
</dd>
</dl>
</section>
</section>
<section id="bdeviceeditor" class="level2" data-number="3.11">
<h2 data-number="3.11"><span class="header-section-number">3.11</span>
<span id="BDeviceEditor"
data-4search="ui/b/deviceeditor.js:BDeviceEditor;section">BDeviceEditor</span></h2>
<p>Editor for audio signal devices.</p>
</section>
<section id="props-1" class="level2" data-number="3.12">
<h2 data-number="3.12"><span class="header-section-number">3.12</span>
Props:</h2>
<dl>
<dt><em>device</em></dt>
<dd>
Audio signal processing device.
</dd>
</dl>
<section id="functions" class="level3" data-number="3.12.1">
<h3 data-number="3.12.1"><span
class="header-section-number">3.12.1</span> Functions</h3>
<dl>
<dt><span id="property_groups"
data-4search="ui/b/deviceeditor.js:property_groups;func"><strong><code>property_groups</code></strong></span>
<code>(</code><em>asyncpropertylist</em><code>)</code></dt>
<dd>
Determine layout of properties.
</dd>
</dl>
</section>
<section id="component-class" class="level3" data-number="3.12.2">
<h3 data-number="3.12.2"><span
class="header-section-number">3.12.2</span> Component class</h3>
<dl>
<dt><em>class</em> <span id="Component"
data-4search="ui/b/envue.js:Component;class"><strong>Component</strong></span></dt>
<dd>
<p>Component base class for wrapping Vue components.Let
<code>this.$vm</code> point to the Vue component, and
<code>$vm.$object</code> point to <code>this</code>.</p>
<dl>
<dt><em>new</em> <span id="Component"
data-4search="ui/b/envue.js:Component;func"><strong><code>Component</code></strong></span>
<code>(</code><em>vm</em><code>)</code></dt>
<dd>
Let <code>this.$vm</code> point to the Vue component, and
<code>$vm.$object</code> point to <code>this</code>.
</dd>
<dt><span id="update"
data-4search="ui/b/envue.js:update;func"><strong><code>update</code></strong></span>
<code>()</code></dt>
<dd>
Force a Vue component update.
</dd>
<dt><span id="observable_from_getters"
data-4search="ui/b/envue.js:observable_from_getters;func"><strong><code>observable_from_getters</code></strong></span>
<code>(</code><em>tmpl</em><code>)</code></dt>
<dd>
Wrapper for <a
href="#Util.observable_from_getters">Util.observable_from_getters()</a>.
</dd>
<dt><span id="_watch"
data-4search="ui/b/envue.js:$watch;func"><strong><code>$watch</code></strong></span>
<code>(</code><em>args</em><code>)</code></dt>
<dd>
Wrapper for <a
href="https://v3.vuejs.org/api/instance-methods.html#watch">Vue.$watch</a>
</dd>
<dt><span id="vue_export"
data-4search="ui/b/envue.js:vue_export;func"><strong><code>vue_export</code></strong></span>
<code>(</code><em>vue_object</em><code>)</code>  
<code>[static]</code></dt>
<dd>
Create a Vue options API object from <em>vue_object</em> for SFC
exports.
</dd>
</dl>
</dd>
</dl>
</section>
<section id="functions-1" class="level3" data-number="3.12.3">
<h3 data-number="3.12.3"><span
class="header-section-number">3.12.3</span> Functions</h3>
<dl>
<dt><span id="forward_access"
data-4search="ui/b/envue.js:forward_access;func"><strong><code>forward_access</code></strong></span>
<code>(</code><em>vm, classinstance, ignores</em><code>)</code></dt>
<dd>
Forward all accesses to fields on <code>vm</code> to access fields on
<code>classinstance</code>.
</dd>
<dt><span id="vue_export_from_class"
data-4search="ui/b/envue.js:vue_export_from_class;func"><strong><code>vue_export_from_class</code></strong></span>
<code>(</code><em>Class, vue_object</em><code>)</code></dt>
<dd>
Create a Vue options API object that proxies access to a newly created
<code>Class</code> instance.
</dd>
</dl>
</section>
</section>
<section id="bicon" class="level2" data-number="3.13">
<h2 data-number="3.13"><span class="header-section-number">3.13</span>
<span id="BIcon"
data-4search="ui/b/icon.js:BIcon;section">BIcon</span></h2>
<p>The &lt;b-icon&gt; element displays icons from various icon fonts. In
order to style the color of icon font symbols, simply apply the
<code>color</code> CSS property to this element (styling
<code>fill</code> as for SVG elements is not needed).</p>
<section id="props-2" class="level3" data-number="3.13.1">
<h3 data-number="3.13.1"><span
class="header-section-number">3.13.1</span> Props:</h3>
<dl>
<dt><em>iconclass</em></dt>
<dd>
A CSS class to apply to this icon.
</dd>
<dt><em>ic</em></dt>
<dd>
A prefixed variant of <code>fa</code>, <code>bc</code>, <code>mi</code>,
<code>uc</code>.
</dd>
<dd>
Either a prefixed icon font symbol or a unicode character literal, see
</dd>
<dd>
the Unicode <a
href="https://en.wikipedia.org/wiki/List_of_Unicode_characters">Lists</a>
and <a
href="https://en.wikipedia.org/wiki/Unicode_symbols#Symbol_block_list">Symbols</a>.
</dd>
<dd>
The 'bc-' prefix indicates an icon from the "AnklangIcons Font" symbols.
</dd>
<dd>
The 'fa-' prefix indicates an icon from the "Fork Awesome" collection
(compatible with "Font Awesome 4"), see the <a
href="https://forkaweso.me/Fork-Awesome/cheatsheet/">Fork Awesome
Icons</a>.
</dd>
<dd>
The 'mi-' prefix indicates an icon from the "Material Icons" collection,
see the <a href="https://material.io/tools/icons/">Material Design
Icons</a>.
</dd>
<dt><em>nosize</em></dt>
<dd>
Prevent the element from applying default size constraints.
</dd>
<dt><em>fw</em></dt>
<dd>
Apply fixed-width sizing.
</dd>
<dt><em>lg</em></dt>
<dd>
Make the icon 33% larger than its container.
</dd>
<dt><em>hflip</em></dt>
<dd>
Flip the icon horizontally.
</dd>
<dt><em>vflip</em></dt>
<dd>
Flip the icon vertically.
</dd>
</dl>
</section>
</section>
<section id="bknob" class="level2" data-number="3.14">
<h2 data-number="3.14"><span class="header-section-number">3.14</span>
<span id="BKnob"
data-4search="ui/b/knob.js:BKnob;section">BKnob</span></h2>
<p>The &lt;b-knob&gt; element provides a knob for scalar inputs. It
supports the Vue <a
href="https://vuejs.org/v2/guide/components-custom-events.html#Customizing-Component-v-model">v-model</a>
protocol by emitting an <code>input</code> event on value changes and
accepting inputs via the <code>value</code> prop.</p>
<section id="props-3" class="level3" data-number="3.14.1">
<h3 data-number="3.14.1"><span
class="header-section-number">3.14.1</span> Props:</h3>
<dl>
<dt><em>bidir</em></dt>
<dd>
Boolean, flag indicating bidirectional inputs with value range
<code>-1…+1</code>.
</dd>
<dt><em>value</em></dt>
<dd>
Float, the knob value to be displayed, the value range is
<code>0…+1</code> if <em>bidir</em> is <code>false</code>.
</dd>
<dt><em>format</em></dt>
<dd>
String, format specification for popup bubbles, containinig a number for
the peak amplitude.
</dd>
<dt><em>label</em></dt>
<dd>
String, text string for popup bubbles.
</dd>
<dt><em>hscroll</em></dt>
<dd>
Boolean, adjust value with horizontal scrolling (without dragging).
</dd>
<dt><em>vscroll</em></dt>
<dd>
Boolean, adjust value with vertical scrolling (without dragging).
</dd>
<dt><em>width4height</em></dt>
<dd>
Automatically determine width from externally specified height
(default), otherwise determines height.
</dd>
</dl>
</section>
<section id="implementation-notes" class="level3" data-number="3.14.2">
<h3 data-number="3.14.2"><span
class="header-section-number">3.14.2</span> Implementation Notes</h3>
<p>The knob is rendered based on an SVG drawing, which is arranged in
such a way that adding rotational transforms to the SVG elements is
sufficient to display varying knob levels. Chrome cannot render
individual SVG nodes into seperate layers (GPU textures) so utilizing
GPU acceleration requires splitting the original SVG into several SVG
layers, each of which can be utilized as a seperate GPU texture with the
CSS setting <code>will-change: transform</code>.</p>
</section>
<section id="functions-2" class="level3" data-number="3.14.3">
<h3 data-number="3.14.3"><span
class="header-section-number">3.14.3</span> Functions</h3>
<dl>
<dt><span id="spin_drag_start"
data-4search="ui/b/knob.js:spin_drag_start;func"><strong><code>spin_drag_start</code></strong></span>
<code>(</code><em>element, event, value_callback</em><code>)</code></dt>
<dd>
Setup drag handlers for numeric spin button behavior.
</dd>
<dt><span id="spin_drag_stop"
data-4search="ui/b/knob.js:spin_drag_stop;func"><strong><code>spin_drag_stop</code></strong></span>
<code>(</code><em>event_or_element</em><code>)</code></dt>
<dd>
Stop sping drag event handlers and pointer grab.
</dd>
<dt><span id="spin_drag_pointermove"
data-4search="ui/b/knob.js:spin_drag_pointermove;func"><strong><code>spin_drag_pointermove</code></strong></span>
<code>(</code><em>event</em><code>)</code></dt>
<dd>
Handle sping drag pointer motion.
</dd>
<dt><span id="spin_drag_change"
data-4search="ui/b/knob.js:spin_drag_change;func"><strong><code>spin_drag_change</code></strong></span>
<code>()</code></dt>
<dd>
Turn accumulated spin drag motions into actual value changes.
</dd>
<dt><span id="spin_drag_granularity"
data-4search="ui/b/knob.js:spin_drag_granularity;func"><strong><code>spin_drag_granularity</code></strong></span>
<code>(</code><em>event</em><code>)</code></dt>
<dd>
Calculate spin drag acceleration (slowdown) from event type and
modifiers.
</dd>
</dl>
</section>
</section>
<section id="bmenubar" class="level2" data-number="3.15">
<h2 data-number="3.15"><span class="header-section-number">3.15</span>
<span id="BMenuBar"
data-4search="ui/b/menubar.js:BMenuBar;section">BMenuBar</span></h2>
<p>The &lt;b-menubar&gt; element contains main menus at the top of the
window.</p>
</section>
<section id="bmenuitem" class="level2" data-number="3.16">
<h2 data-number="3.16"><span class="header-section-number">3.16</span>
<span id="BMenuItem"
data-4search="ui/b/menuitem.js:BMenuItem;section">BMenuItem</span></h2>
<p>The &lt;b-menuitem&gt; element can be used as a descendant of a <a
href="contextmenu_8js.html#BContextMenu">BContextMenu</a>. The menuitem
can be activated via keyboard focus or mouse click and will notify its
BContextMenu about the click and its <code>uri</code>. If no
<code>uri</code> is specified, the BContextMenu will still be notified
to be closed, unless <code>$event.preventDefault()</code> is called.</p>
<section id="properties-1" class="level3" data-number="3.16.1">
<h3 data-number="3.16.1"><span
class="header-section-number">3.16.1</span> Properties:</h3>
<dl>
<dt><em>.isactive</em>: bool (uri)</dt>
<dd>
Property callback used to check if a particular menu item should stay
active or be disabled.
</dd>
</dl>
</section>
<section id="attributes-1" class="level3" data-number="3.16.2">
<h3 data-number="3.16.2"><span
class="header-section-number">3.16.2</span> Attributes:</h3>
<dl>
<dt><em>uri</em></dt>
<dd>
Unique identifier for this menu item.
</dd>
<dt><em>kbd</em></dt>
<dd>
Hotkey to acivate the menu item, displayed next to the menu item label.
</dd>
<dt><em>disabled</em></dt>
<dd>
Boolean flag indicating disabled state.
</dd>
<dt><em>ic</em></dt>
<dd>
Shorthands icon properties that are forwarded to a <a
href="#b-icon">B-ICON</a> used inside the menuitem.
</dd>
</dl>
</section>
<section id="events-3" class="level3" data-number="3.16.3">
<h3 data-number="3.16.3"><span
class="header-section-number">3.16.3</span> Events:</h3>
<dl>
<dt><em>click</em></dt>
<dd>
Event emitted on keyboard or mouse activation, use
<code>event.stopPropagation()</code> to prevent bubbling to the
contextmenu.
</dd>
</dl>
</section>
<section id="slots-1" class="level3" data-number="3.16.4">
<h3 data-number="3.16.4"><span
class="header-section-number">3.16.4</span> Slots:</h3>
<dl>
<dt><em>default</em></dt>
<dd>
All contents passed into this slot will be rendered as contents of this
element.
</dd>
</dl>
</section>
</section>
<section id="bmenurow" class="level2" data-number="3.17">
<h2 data-number="3.17"><span class="header-section-number">3.17</span>
<span id="BMenuRow"
data-4search="ui/b/menurow.js:BMenuRow;section">BMenuRow</span></h2>
<p>The &lt;b-menurow&gt; element can contain <a
href="menuitem_8js.html#BMenuItem">BMenuItem</a> elements, that are
packed horizontally inside a menurow.</p>
<section id="props-4" class="level3" data-number="3.17.1">
<h3 data-number="3.17.1"><span
class="header-section-number">3.17.1</span> Props:</h3>
<dl>
<dt><em>noturn</em></dt>
<dd>
Avoid turning the icon-label direction in menu items to be upside down.
</dd>
</dl>
</section>
<section id="slots-2" class="level3" data-number="3.17.2">
<h3 data-number="3.17.2"><span
class="header-section-number">3.17.2</span> Slots:</h3>
<dl>
<dt><em>default</em></dt>
<dd>
All contents passed into this slot will be rendered as contents of this
element.
</dd>
</dl>
</section>
</section>
<section id="bmenuseparator" class="level2" data-number="3.18">
<h2 data-number="3.18"><span class="header-section-number">3.18</span>
<span id="BMenuSeparator"
data-4search="ui/b/menuseparator.js:BMenuSeparator;section">BMenuSeparator</span></h2>
<p>The &lt;b-menuseparator&gt; element is a menu element that serves as
a visual separator between other elements.</p>
</section>
<section id="bmenutitle" class="level2" data-number="3.19">
<h2 data-number="3.19"><span class="header-section-number">3.19</span>
<span id="BMenuTitle"
data-4search="ui/b/menutitle.js:BMenuTitle;section">BMenuTitle</span></h2>
<p>The &lt;b-menutitle&gt; element can be used as menu title inside a <a
href="contextmenu_8js.html#BContextMenu">BContextMenu</a>.</p>
<section id="slots-3" class="level3" data-number="3.19.1">
<h3 data-number="3.19.1"><span
class="header-section-number">3.19.1</span> Slots:</h3>
<dl>
<dt><em>default</em></dt>
<dd>
All contents passed into this slot will be rendered as contents of this
element.
</dd>
</dl>
</section>
</section>
<section id="bmore" class="level2" data-number="3.20">
<h2 data-number="3.20"><span class="header-section-number">3.20</span>
<span id="BMore"
data-4search="ui/b/more.js:BMore;section">BMore</span></h2>
<p>The &lt;b-more&gt; element is an indicator for adding or dropping new
UI elements.</p>
</section>
<section id="bnumberinput" class="level2" data-number="3.21">
<h2 data-number="3.21"><span class="header-section-number">3.21</span>
<span id="BNumberInput"
data-4search="ui/b/numberinput.js:BNumberInput;section">BNumberInput</span></h2>
<p>The &lt;b-numberinput&gt; element is a field-editor for integer or
floating point number ranges. The input <code>value</code> will be
constrained to take on an amount between <code>min</code> and
<code>max</code> inclusively.</p>
<section id="properties-2" class="level3" data-number="3.21.1">
<h3 data-number="3.21.1"><span
class="header-section-number">3.21.1</span> Properties:</h3>
<dl>
<dt><em>value</em></dt>
<dd>
Contains the number being edited.
</dd>
<dt><em>min</em></dt>
<dd>
The minimum amount that <code>value</code> can take on.
</dd>
<dt><em>max</em></dt>
<dd>
The maximum amount that <code>value</code> can take on.
</dd>
<dt><em>step</em></dt>
<dd>
A useful amount for stepwise increments.
</dd>
<dt><em>allowfloat</em></dt>
<dd>
Unless this setting is <code>true</code>, numbers are constrained to
integer values.
</dd>
<dt><em>readonly</em></dt>
<dd>
Make this component non editable for the user.
</dd>
</dl>
</section>
<section id="events-4" class="level3" data-number="3.21.2">
<h3 data-number="3.21.2"><span
class="header-section-number">3.21.2</span> Events:</h3>
<dl>
<dt><em>valuechange</em></dt>
<dd>
Event emitted whenever the value changes, which is provided as
<code>event.target.value</code>.
</dd>
</dl>
</section>
</section>
<section id="bobjecteditor" class="level2" data-number="3.22">
<h2 data-number="3.22"><span class="header-section-number">3.22</span>
<span id="BObjectEditor"
data-4search="ui/b/objecteditor.js:BObjectEditor;section">BObjectEditor</span></h2>
<p>The &lt;b-objecteditor&gt; element is a field-editor for object
input. A copy of the input value is edited, update notifications are
provided via an <code>input</code> event.</p>
<section id="properties-3" class="level3" data-number="3.22.1">
<h3 data-number="3.22.1"><span
class="header-section-number">3.22.1</span> Properties:</h3>
<dl>
<dt><em>value</em></dt>
<dd>
Object with properties to be edited.
</dd>
<dt><em>readonly</em></dt>
<dd>
Make this component non editable for the user.
</dd>
</dl>
</section>
<section id="events-5" class="level3" data-number="3.22.2">
<h3 data-number="3.22.2"><span
class="header-section-number">3.22.2</span> Events:</h3>
<dl>
<dt><em>input</em></dt>
<dd>
This event is emitted whenever the value changes through user input or
needs to be constrained.
</dd>
</dl>
</section>
</section>
<section id="bpartlist" class="level2" data-number="3.23">
<h2 data-number="3.23"><span class="header-section-number">3.23</span>
<span id="BPartList"
data-4search="ui/b/partlist.js:BPartList;section">BPartList</span></h2>
<p>The &lt;b-partlist&gt; element allows to arrange Clip objects for
playback.</p>
<section id="constants" class="level3" data-number="3.23.1">
<h3 data-number="3.23.1"><span
class="header-section-number">3.23.1</span> Constants</h3>
<dl>
<dt><span id="list_actions"
data-4search="ui/b/piano-ctrl.js:list_actions;export"><strong><code>list_actions</code></strong></span></dt>
<dd>
List menu actions for PianoRoll.
</dd>
</dl>
</section>
<section id="functions-3" class="level3" data-number="3.23.2">
<h3 data-number="3.23.2"><span
class="header-section-number">3.23.2</span> Functions</h3>
<dl>
<dt><span id="ntool"
data-4search="ui/b/piano-ctrl.js:ntool;func"><strong><code>ntool</code></strong></span>
<code>(</code><em>toolmode, drag_event, cursor,
predicate</em><code>)</code></dt>
<dd>
Add/register piano-roll canvas tool
</dd>
<dt><span id="notes_canvas_drag_select"
data-4search="ui/b/piano-ctrl.js:notes_canvas_drag_select;func"><strong><code>notes_canvas_drag_select</code></strong></span>
<code>(</code><em>event, MODE</em><code>)</code></dt>
<dd>
<h3 id="select-tool">Select Tool</h3>
<p><img src="cursors/cross.svg" alt="Crosshair" /> The Select Tool
allows selection of single notes or groups of notes. Modifier keys can
be used to modify the selection behavior.</p>
<h3 id="horizontal-select">Horizontal Select</h3>
</dd>
<dt><span id="notes_canvas_drag_paint"
data-4search="ui/b/piano-ctrl.js:notes_canvas_drag_paint;func"><strong><code>notes_canvas_drag_paint</code></strong></span>
<code>(</code><em>event, MODE</em><code>)</code></dt>
<dd>
<h3 id="paint-tool">Paint Tool</h3>
<p><img src="cursors/pen.svg" alt="Pen" /> With the note Paint Tool,
notes can be placed everywhere in the grid by clicking mouse button 1
and possibly keeping it held during drags.</p>
</dd>
<dt><span id="notes_canvas_drag_move"
data-4search="ui/b/piano-ctrl.js:notes_canvas_drag_move;func"><strong><code>notes_canvas_drag_move</code></strong></span>
<code>(</code><em>event, MODE</em><code>)</code></dt>
<dd>
<h3 id="move-tool">Move Tool</h3>
<p><img src="cursors/move.svg" alt="Pen" /> With the note Move Tool,
selected notes can be moved clicking mouse button 1 and keeping it held
during drags. A copy will be made instead of moving the selected notes
if the ctrl key is pressed during drag.</p>
</dd>
<dt><span id="notes_canvas_drag_resize"
data-4search="ui/b/piano-ctrl.js:notes_canvas_drag_resize;func"><strong><code>notes_canvas_drag_resize</code></strong></span>
<code>(</code><em>event, MODE</em><code>)</code></dt>
<dd>
<h4 id="resizing-notes">Resizing Notes</h4>
<p><img src="cursors/hresize.svg" alt="H-Resize" /> When the Paint Tool
is selected, the right edge of a note can be draged to make notes
shorter or longer in duration.</p>
</dd>
<dt><span id="notes_canvas_drag_erase"
data-4search="ui/b/piano-ctrl.js:notes_canvas_drag_erase;func"><strong><code>notes_canvas_drag_erase</code></strong></span>
<code>(</code><em>event, MODE</em><code>)</code></dt>
<dd>
<h3 id="erase-tool">Erase Tool</h3>
<p><img src="cursors/eraser.svg" alt="Eraser" /> The Erase Tool allows
deletion of all notes selected during a mouse button 1 drag. The
deletion can be aborted by the Escape key.</p>
</dd>
<dt><span id="note_hover_body"
data-4search="ui/b/piano-ctrl.js:note_hover_body;func"><strong><code>note_hover_body</code></strong></span>
<code>(</code><em>coords, tick, key, notes</em><code>)</code></dt>
<dd>
Detect note if hovering over its body
</dd>
<dt><span id="note_hover_tail"
data-4search="ui/b/piano-ctrl.js:note_hover_tail;func"><strong><code>note_hover_tail</code></strong></span>
<code>(</code><em>coords, tick, key, notes</em><code>)</code></dt>
<dd>
Detect note if hovering over its tail
</dd>
<dt><span id="note_hover_head"
data-4search="ui/b/piano-ctrl.js:note_hover_head;func"><strong><code>note_hover_head</code></strong></span>
<code>(</code><em>coords, tick, key, notes</em><code>)</code></dt>
<dd>
Detect note if hovering over its head
</dd>
<dt><span id="notes_canvas_tool_from_hover"
data-4search="ui/b/piano-ctrl.js:notes_canvas_tool_from_hover;func"><strong><code>notes_canvas_tool_from_hover</code></strong></span>
<code>(</code><em>piano_roll, pointerevent</em><code>)</code></dt>
<dd>
Get drag tool and cursor from hover position
</dd>
<dt><span id="target_coords"
data-4search="ui/b/piano-ctrl.js:target_coords;func"><strong><code>target_coords</code></strong></span>
<code>(</code><em>event, target</em><code>)</code></dt>
<dd>
Translate event offsetX,offsetY into taret element
</dd>
</dl>
</section>
</section>
<section id="bpianoroll" class="level2" data-number="3.24">
<h2 data-number="3.24"><span class="header-section-number">3.24</span>
<span id="BPianoRoll"
data-4search="ui/b/pianoroll.js:BPianoRoll;section">BPianoRoll</span></h2>
<p>The &lt;b-piano-roll&gt; element allows note editing.</p>
<section id="functions-4" class="level3" data-number="3.24.1">
<h3 data-number="3.24.1"><span
class="header-section-number">3.24.1</span> Functions</h3>
<dl>
<dt><span id="piano_layout"
data-4search="ui/b/pianoroll.js:piano_layout;func"><strong><code>piano_layout</code></strong></span>
<code>()</code></dt>
<dd>
Determine layout in pixels.
</dd>
<dt><span id="set_canvas_font"
data-4search="ui/b/pianoroll.js:set_canvas_font;func"><strong><code>set_canvas_font</code></strong></span>
<code>(</code><em>ctx, size</em><code>)</code></dt>
<dd>
Assign canvas font to drawing context
</dd>
<dt><span id="paint_piano"
data-4search="ui/b/pianoroll.js:paint_piano;func"><strong><code>paint_piano</code></strong></span>
<code>()</code></dt>
<dd>
Paint piano key canvas
</dd>
<dt><span id="paint_notes"
data-4search="ui/b/pianoroll.js:paint_notes;func"><strong><code>paint_notes</code></strong></span>
<code>()</code></dt>
<dd>
Paint piano roll notes
</dd>
<dt><span id="paint_timeline"
data-4search="ui/b/pianoroll.js:paint_timeline;func"><strong><code>paint_timeline</code></strong></span>
<code>()</code></dt>
<dd>
Paint timeline digits and indicators
</dd>
<dt><span id="paint_timegrid"
data-4search="ui/b/pianoroll.js:paint_timegrid;func"><strong><code>paint_timegrid</code></strong></span>
<code>(</code><em>canvas, with_labels</em><code>)</code></dt>
<dd>
Paint timegrid into any canvas
</dd>
</dl>
</section>
</section>
<section id="bplaycontrols" class="level2" data-number="3.25">
<h2 data-number="3.25"><span class="header-section-number">3.25</span>
<span id="BPlayControls"
data-4search="ui/b/playcontrols.js:BPlayControls;section">BPlayControls</span></h2>
<p>The &lt;b-playcontrols&gt; element is a container holding the play
and seek controls for a Ase.song.</p>
</section>
<section id="bpositionview" class="level2" data-number="3.26">
<h2 data-number="3.26"><span class="header-section-number">3.26</span>
<span id="BPositionView"
data-4search="ui/b/positionview.js:BPositionView;section">BPositionView</span></h2>
<p>The &lt;b-positionview&gt; element displays the project transport
position pointer and related information.</p>
<section id="props-5" class="level3" data-number="3.26.1">
<h3 data-number="3.26.1"><span
class="header-section-number">3.26.1</span> Props:</h3>
<ul>
<li><strong>project</strong> - The object providing playback API.</li>
</ul>
</section>
</section>
<section id="bpropinput" class="level2" data-number="3.27">
<h2 data-number="3.27"><span class="header-section-number">3.27</span>
<span id="BPropInput"
data-4search="ui/b/propinput.js:BPropInput;section">BPropInput</span></h2>
<p>A property input element, usually for numbers, toggles or menus.</p>
<section id="props-6" class="level3" data-number="3.27.1">
<h3 data-number="3.27.1"><span
class="header-section-number">3.27.1</span> Props:</h3>
<dl>
<dt><em>labeled</em></dt>
<dd>
Display property name next to its editing field.
</dd>
<dt><em>prop</em></dt>
<dd>
Contains the extended property being edited.
</dd>
<dt><em>readonly</em></dt>
<dd>
Make this component non editable for the user.
</dd>
</dl>
</section>
</section>
<section id="shellclass" class="level2" data-number="3.28">
<h2 data-number="3.28"><span class="header-section-number">3.28</span>
<span id="ShellClass"
data-4search="ui/b/shell.vue.js:ShellClass;section">ShellClass</span></h2>
<p>The global <code>Shell</code> singleton carries all current UI and
Ase.Project context</p>
<section id="shellclass-class" class="level3" data-number="3.28.1">
<h3 data-number="3.28.1"><span
class="header-section-number">3.28.1</span> ShellClass class</h3>
<dl>
<dt><em>class</em> <span id="ShellClass"
data-4search="ui/b/shell.vue.js:ShellClass;class"><strong>ShellClass</strong></span></dt>
<dd>
<p>…</p>
<dl>
<dt><span id="piano_roll"
data-4search="ui/b/shell.vue.js:piano_roll;func"><strong><code>piano_roll</code></strong></span>
<code>()</code></dt>
<dd>
Access PianoRoll component
</dd>
<dt><span id="show_spinner"
data-4search="ui/b/shell.vue.js:show_spinner;func"><strong><code>show_spinner</code></strong></span>
<code>()</code></dt>
<dd>
Show spinner to indicate "busy" state (increment reason)
</dd>
<dt><span id="hide_spinner"
data-4search="ui/b/shell.vue.js:hide_spinner;func"><strong><code>hide_spinner</code></strong></span>
<code>()</code></dt>
<dd>
Hide spinner to indicate "busy" state (decrement reason)
</dd>
<dt><span id="create_note"
data-4search="ui/b/shell.vue.js:create_note;func"><strong><code>create_note</code></strong></span>
<code>(</code><em>args</em><code>)</code></dt>
<dd>
Display notice to the user
</dd>
</dl>
</dd>
</dl>
</section>
</section>
<section id="bstatusbar" class="level2" data-number="3.29">
<h2 data-number="3.29"><span class="header-section-number">3.29</span>
<span id="BStatusBar"
data-4search="ui/b/statusbar.js:BStatusBar;section">BStatusBar</span></h2>
<p>The &lt;b-statusbar&gt; element is an area for the display of status
messages and UI configuration.</p>
</section>
<section id="bswitchinput" class="level2" data-number="3.30">
<h2 data-number="3.30"><span class="header-section-number">3.30</span>
<span id="BSwitchInput"
data-4search="ui/b/switchinput.js:BSwitchInput;section">BSwitchInput</span></h2>
<p>The &lt;b-switchinput&gt; element is a field-editor switch to change
between on and off.</p>
<section id="properties-4" class="level3" data-number="3.30.1">
<h3 data-number="3.30.1"><span
class="header-section-number">3.30.1</span> Properties:</h3>
<dl>
<dt><em>value</em></dt>
<dd>
Contains a boolean indicating whether the switch is on or off.
</dd>
<dt><em>readonly</em></dt>
<dd>
Make this component non editable for the user.
</dd>
</dl>
</section>
<section id="events-6" class="level3" data-number="3.30.2">
<h3 data-number="3.30.2"><span
class="header-section-number">3.30.2</span> Events:</h3>
<dl>
<dt><em>valuechange</em></dt>
<dd>
Event emitted whenever the value changes, which is provided as
<code>event.target.value</code>.
</dd>
</dl>
</section>
</section>
<section id="btextinput" class="level2" data-number="3.31">
<h2 data-number="3.31"><span class="header-section-number">3.31</span>
<span id="BTextInput"
data-4search="ui/b/textinput.js:BTextInput;section">BTextInput</span></h2>
<p>The &lt;b-textinput&gt; element is a field-editor for text input.</p>
<section id="properties-5" class="level3" data-number="3.31.1">
<h3 data-number="3.31.1"><span
class="header-section-number">3.31.1</span> Properties:</h3>
<dl>
<dt><em>value</em></dt>
<dd>
Contains the text string being edited.
</dd>
<dt><em>readonly</em></dt>
<dd>
Make this component non editable for the user.
</dd>
</dl>
</section>
<section id="events-7" class="level3" data-number="3.31.2">
<h3 data-number="3.31.2"><span
class="header-section-number">3.31.2</span> Events:</h3>
<dl>
<dt><em>valuechange</em></dt>
<dd>
Event emitted whenever the value changes, which is provided as
<code>event.target.value</code>.
</dd>
</dl>
</section>
</section>
<section id="btoggle" class="level2" data-number="3.32">
<h2 data-number="3.32"><span class="header-section-number">3.32</span>
<span id="BToggle"
data-4search="ui/b/toggle.js:BToggle;section">BToggle</span></h2>
<p>The &lt;b-toggle&gt; element implements a simple toggle button for
boolean audio processor input properties. Its <code>value</code> can be
accessed as a property and <code>valuechange</code> is emitted on
changes.</p>
<section id="props-7" class="level3" data-number="3.32.1">
<h3 data-number="3.32.1"><span
class="header-section-number">3.32.1</span> Props:</h3>
<dl>
<dt><em>value</em></dt>
<dd>
Boolean, the toggle value to be displayed, the values are
<code>true</code> or <code>false</code>.
</dd>
<dt><em>label</em></dt>
<dd>
String, label to be displayed inside the toggle button.
</dd>
</dl>
</section>
<section id="events-8" class="level3" data-number="3.32.2">
<h3 data-number="3.32.2"><span
class="header-section-number">3.32.2</span> Events:</h3>
<dl>
<dt><em>valuechange</em></dt>
<dd>
Event emitted whenever the value changes, which is provided as
<code>event.target.value</code>.
</dd>
</dl>
</section>
<section id="huesaturation-class" class="level3" data-number="3.32.3">
<h3 data-number="3.32.3"><span
class="header-section-number">3.32.3</span> HueSaturation class</h3>
<dl>
<dt><em>class</em> <span id="HueSaturation"
data-4search="ui/colors.js:HueSaturation;class"><strong>HueSaturation</strong></span></dt>
<dd>
Class with logic and spline approximations to calculate ZHSV.
</dd>
</dl>
</section>
<section id="functions-5" class="level3" data-number="3.32.4">
<h3 data-number="3.32.4"><span
class="header-section-number">3.32.4</span> Functions</h3>
<dl>
<dt><span id="srgb_from_hsv"
data-4search="ui/colors.js:srgb_from_hsv;func"><strong><code>srgb_from_hsv</code></strong></span>
<code>(</code><em>hue, saturation, value</em><code>)</code></dt>
<dd>
Calculate sRGB from <code>hue, saturation, value</code>.
</dd>
<dt><span id="hsv_from_srgb"
data-4search="ui/colors.js:hsv_from_srgb;func"><strong><code>hsv_from_srgb</code></strong></span>
<code>(</code><em>srgb</em><code>)</code></dt>
<dd>
Calculate <code>{ hue, saturation, value }</code> from
<code>srgb</code>.
</dd>
<dt><span id="zhsl_from"
data-4search="ui/colors.js:zhsl_from;func"><strong><code>zhsl_from</code></strong></span>
<code>(</code><em>srgb, gamut</em><code>)</code></dt>
<dd>
Calculate <code>{ hue, saturation, lightness }</code> from
<code>srgb</code>.
</dd>
<dt><span id="srgb_from_zhsv"
data-4search="ui/colors.js:srgb_from_zhsv;func"><strong><code>srgb_from_zhsv</code></strong></span>
<code>(</code><em>hue, saturation, value, gamut</em><code>)</code></dt>
<dd>
Calculate sRGB from <code>{ hue, saturation, value }</code>.
</dd>
<dt><span id="hex_from_zhsv"
data-4search="ui/colors.js:hex_from_zhsv;func"><strong><code>hex_from_zhsv</code></strong></span>
<code>(</code><em>hue, saturation, value, gamut</em><code>)</code></dt>
<dd>
Calculate hexadecimal color from
<code>{ hue, saturation, value }</code>.
</dd>
<dt><span id="zhsv_from"
data-4search="ui/colors.js:zhsv_from;func"><strong><code>zhsv_from</code></strong></span>
<code>(</code><em>srgb, gamut</em><code>)</code></dt>
<dd>
Calculate <code>{ hue, saturation, value }</code> from
<code>srgb</code>.
</dd>
<dt><span id="srgb_from_zhsl"
data-4search="ui/colors.js:srgb_from_zhsl;func"><strong><code>srgb_from_zhsl</code></strong></span>
<code>(</code><em>hue, saturation, lightness,
gamut</em><code>)</code></dt>
<dd>
Calculate sRGB from <code>{ hue, saturation, value }</code>.
</dd>
<dt><span id="hex_from_zhsl"
data-4search="ui/colors.js:hex_from_zhsl;func"><strong><code>hex_from_zhsl</code></strong></span>
<code>(</code><em>hue, saturation, lightness,
gamut</em><code>)</code></dt>
<dd>
Calculate hexadecimal color from
<code>{ hue, saturation, value }</code>.
</dd>
<dt><span id="color2rgba"
data-4search="ui/colors.js:color2rgba;func"><strong><code>color2rgba</code></strong></span>
<code>(</code><em>color</em><code>)</code></dt>
<dd>
Yield [ R, G, B, A ] from <code>color</code>.
</dd>
<dt><span id="zmod_assignop"
data-4search="ui/colors.js:zmod_assignop;func"><strong><code>zmod_assignop</code></strong></span>
<code>(</code><em>col, prop, op, num, perc</em><code>)</code></dt>
<dd>
Re-assign a specific color property.
</dd>
<dt><span id="zmod"
data-4search="ui/colors.js:zmod;func"><strong><code>zmod</code></strong></span>
<code>(</code><em>colorlike, mods</em><code>)</code></dt>
<dd>
Apply a variety of modifications to an input color.
</dd>
<dt><span id="zmod4"
data-4search="ui/colors.js:zmod4;func"><strong><code>zmod4</code></strong></span>
<code>(</code><em>colorlike</em><code>)</code></dt>
<dd>
Find zmod() for a color.
</dd>
<dt><span id="zlerp"
data-4search="ui/colors.js:zlerp;func"><strong><code>zlerp</code></strong></span>
<code>(</code><em>c1, c2, t</em><code>)</code></dt>
<dd>
Interpolate between 2 colors.
</dd>
<dt><span id="lgrey"
data-4search="ui/colors.js:lgrey;func"><strong><code>lgrey</code></strong></span>
<code>(</code><em>lightness</em><code>)</code></dt>
<dd>
Yield a grey tone with CIELAB lightness.
</dd>
</dl>
</section>
</section>
<section id="workerclip" class="level2" data-number="3.33">
<h2 data-number="3.33"><span class="header-section-number">3.33</span>
<span id="WorkerClip"
data-4search="ui/host.js:WorkerClip;section">WorkerClip</span></h2>
<p>Ase::Clip proxy</p>
</section>
<section id="workerhost" class="level2" data-number="3.34">
<h2 data-number="3.34"><span class="header-section-number">3.34</span>
<span id="WorkerHost"
data-4search="ui/host.js:WorkerHost;section">WorkerHost</span></h2>
<p>Global <code>host</code> instance for scripts.</p>
<section id="workerhost-class" class="level3" data-number="3.34.1">
<h3 data-number="3.34.1"><span
class="header-section-number">3.34.1</span> WorkerHost class</h3>
<dl>
<dt><em>class</em> <span id="WorkerHost"
data-4search="ui/host.js:WorkerHost;class"><strong>WorkerHost</strong></span></dt>
<dd>
<p>…</p>
<dl>
<dt><span id="piano_roll_clip"
data-4search="ui/host.js:piano_roll_clip;func"><strong><code>piano_roll_clip</code></strong></span>
<code>()</code></dt>
<dd>
Create handle for the currently selected clip.
</dd>
<dt><span id="script_name"
data-4search="ui/host.js:script_name;func"><strong><code>script_name</code></strong></span>
<code>()</code></dt>
<dd>
Retrieve the file name of the current user script.
</dd>
<dt><span id="script_uuid"
data-4search="ui/host.js:script_uuid;func"><strong><code>script_uuid</code></strong></span>
<code>()</code></dt>
<dd>
Retrieve the UUID set via <a href="#use_api">use_api</a>().
</dd>
<dt><span id="api_level"
data-4search="ui/host.js:api_level;func"><strong><code>api_level</code></strong></span>
<code>()</code></dt>
<dd>
Retrieve numeric API level supported by this runtime.
</dd>
<dt><span id="use_api"
data-4search="ui/host.js:use_api;func"><strong><code>use_api</code></strong></span>
<code>(</code><em>api_level, script_uuid</em><code>)</code></dt>
<dd>
Request use of API level <code>api_level</code> and provide UUID for
controllers.
</dd>
<dt><span id="register"
data-4search="ui/host.js:register;func"><strong><code>register</code></strong></span>
<code>(</code><em>category, label, fun, blurb,
params</em><code>)</code></dt>
<dd>
Register a script function.
</dd>
</dl>
</dd>
</dl>
</section>
</section>
</section>
<section id="name" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span>
NAME</h1>
<p><code>jsextract.js</code> - Script to extract snippets marked with
JsExtract</p>
</section>
<section id="synopsis" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span>
SYNOPSIS</h1>
<p>node <strong>jsextract.js</strong> [<em>OPTIONS</em>]
[<em>file.js</em>...]</p>
</section>
<section id="description" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span>
DESCRIPTION</h1>
<p>The <strong>jsextract.js</strong> processes its input files by
looking for markers such as <code>JsExtract.css`...`</code> and
extracting the template string contents into a corresponding
<code>*.jscss</code> file. This can be preprocessed or copied into a
corresponding <code>*.css</code> file, to be loaded via
<code>JsExtract.fetch_css()</code>.</p>
</section>
<section id="options" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span>
OPTIONS</h1>
<dl>
<dt><strong>-O</strong> &lt;<em>dir</em>&gt;</dt>
<dd>
Specify the directory for output files.
</dd>
</dl>
<section id="focusguard" class="level2" data-number="7.1">
<h2 data-number="7.1"><span class="header-section-number">7.1</span>
<span id="FocusGuard"
data-4search="ui/kbd.js:FocusGuard;section">FocusGuard</span></h2>
<p>Install a FocusGuard to allow only a restricted set of elements to
get focus.</p>
<section id="constants-1" class="level3" data-number="7.1.1">
<h3 data-number="7.1.1"><span class="header-section-number">7.1.1</span>
Constants</h3>
<dl>
<dt><span id="kbd_modifiers"
data-4search="ui/kbd.js:kbd_modifiers;var"><strong><code>kbd_modifiers</code></strong></span></dt>
<dd>
Keyboard modifiers used for hotkeys.
</dd>
<dt><span id="KeyCode"
data-4search="ui/kbd.js:KeyCode;export"><strong><code>KeyCode</code></strong></span></dt>
<dd>
Symbolic names for key codes
</dd>
</dl>
</section>
<section id="functions-6" class="level3" data-number="7.1.2">
<h3 data-number="7.1.2"><span class="header-section-number">7.1.2</span>
Functions</h3>
<dl>
<dt><span id="display_keyname"
data-4search="ui/kbd.js:display_keyname;func"><strong><code>display_keyname</code></strong></span>
<code>(</code><em>keyname</em><code>)</code></dt>
<dd>
Create display name from KeyEvent.code names.
</dd>
<dt><span id="hotkey_name_from_event"
data-4search="ui/kbd.js:hotkey_name_from_event;func"><strong><code>hotkey_name_from_event</code></strong></span>
<code>(</code><em>event</em><code>)</code></dt>
<dd>
Create hotkey name from KeyboardEvent.
</dd>
<dt><span id="match_key_event"
data-4search="ui/kbd.js:match_key_event;func"><strong><code>match_key_event</code></strong></span>
<code>(</code><em>event, keyname</em><code>)</code></dt>
<dd>
Match an event's key code, considering modifiers.
</dd>
<dt><span id="is_navigation_key_code"
data-4search="ui/kbd.js:is_navigation_key_code;func"><strong><code>is_navigation_key_code</code></strong></span>
<code>(</code><em>keycode</em><code>)</code></dt>
<dd>
Check if a key code is used of rnavigaiton (and non alphanumeric).
</dd>
<dt><span id="activeElement"
data-4search="ui/kbd.js:activeElement;func"><strong><code>activeElement</code></strong></span>
<code>()</code></dt>
<dd>
Get the currently focussed Element, also inspecting open shadowRoot
hierarchies.
</dd>
<dt><span id="list_focusables"
data-4search="ui/kbd.js:list_focusables;func"><strong><code>list_focusables</code></strong></span>
<code>(</code><em>element</em><code>)</code></dt>
<dd>
List elements that can take focus including shadow DOMs and are
descendants of <code>element</code> or the document
</dd>
<dt><span id="push_focus_root"
data-4search="ui/kbd.js:push_focus_root;func"><strong><code>push_focus_root</code></strong></span>
<code>(</code><em>element, escapecb</em><code>)</code></dt>
<dd>
Constrain focus to <code>element</code> and its descendants
</dd>
<dt><span id="remove_focus_root"
data-4search="ui/kbd.js:remove_focus_root;func"><strong><code>remove_focus_root</code></strong></span>
<code>(</code><em>element</em><code>)</code></dt>
<dd>
Remove an <code>element</code> previously installed via
push_focus_root()
</dd>
<dt><span id="element_rect"
data-4search="ui/kbd.js:element_rect;func"><strong><code>element_rect</code></strong></span>
<code>(</code><em>element</em><code>)</code></dt>
<dd>
Compute element rectangle, e.g. for focus movement
</dd>
<dt><span id="keydown_move_focus"
data-4search="ui/kbd.js:keydown_move_focus;func"><strong><code>keydown_move_focus</code></strong></span>
<code>(</code><em>event</em><code>)</code></dt>
<dd>
Move focus on UP/DOWN/HOME/END <code>keydown</code> events
</dd>
<dt><span id="move_focus"
data-4search="ui/kbd.js:move_focus;func"><strong><code>move_focus</code></strong></span>
<code>(</code><em>dir, subfocus</em><code>)</code></dt>
<dd>
Move focus to prev or next focus widget
</dd>
<dt><span id="forget_focus"
data-4search="ui/kbd.js:forget_focus;func"><strong><code>forget_focus</code></strong></span>
<code>(</code><em>element</em><code>)</code></dt>
<dd>
Forget the last focus element inside <code>element</code>
</dd>
<dt><span id="add_hotkey"
data-4search="ui/kbd.js:add_hotkey;func"><strong><code>add_hotkey</code></strong></span>
<code>(</code><em>hotkey, callback,
subtree_element</em><code>)</code></dt>
<dd>
Add a global hotkey handler.
</dd>
<dt><span id="remove_hotkey"
data-4search="ui/kbd.js:remove_hotkey;func"><strong><code>remove_hotkey</code></strong></span>
<code>(</code><em>hotkey, callback</em><code>)</code></dt>
<dd>
Remove a global hotkey handler.
</dd>
<dt><span id="add_key_filter"
data-4search="ui/kbd.js:add_key_filter;func"><strong><code>add_key_filter</code></strong></span>
<code>(</code><em>keycode, callback</em><code>)</code></dt>
<dd>
Add a global keymap.
</dd>
<dt><span id="remove_key_filter"
data-4search="ui/kbd.js:remove_key_filter;func"><strong><code>remove_key_filter</code></strong></span>
<code>(</code><em>keycode</em><code>)</code></dt>
<dd>
Remove a global keymap.
</dd>
<dt><span id="add_keymap"
data-4search="ui/kbd.js:add_keymap;func"><strong><code>add_keymap</code></strong></span>
<code>(</code><em>keymap</em><code>)</code></dt>
<dd>
Add a global keymap.
</dd>
<dt><span id="remove_keymap"
data-4search="ui/kbd.js:remove_keymap;func"><strong><code>remove_keymap</code></strong></span>
<code>(</code><em>keymap</em><code>)</code></dt>
<dd>
Remove a global keymap.
</dd>
<dt><span id="is_button_input"
data-4search="ui/kbd.js:is_button_input;func"><strong><code>is_button_input</code></strong></span>
<code>(</code><em>element</em><code>)</code></dt>
<dd>
Check if <code>element</code> is button-like input
</dd>
<dt><span id="is_nav_input"
data-4search="ui/kbd.js:is_nav_input;func"><strong><code>is_nav_input</code></strong></span>
<code>(</code><em>element</em><code>)</code></dt>
<dd>
Check if <code>element</code> has inner input navigation
</dd>
<dt><span id="shortcut_lookup"
data-4search="ui/kbd.js:shortcut_lookup;func"><strong><code>shortcut_lookup</code></strong></span>
<code>(</code><em>mapname, label, shortcut</em><code>)</code></dt>
<dd>
Lookup shortcut for <code>label</code> in <code>mapname</code>, default
to <code>shortcut</code>
</dd>
<dt><span id="shortcut_dialog"
data-4search="ui/kbd.js:shortcut_dialog;func"><strong><code>shortcut_dialog</code></strong></span>
<code>(</code><em>mapname, label, shortcut</em><code>)</code></dt>
<dd>
Display shortcut editing dialog
</dd>
</dl>
</section>
</section>
<section id="litcomponent" class="level2" data-number="7.2">
<h2 data-number="7.2"><span class="header-section-number">7.2</span>
<span id="LitComponent"
data-4search="ui/little.js:LitComponent;section">LitComponent</span></h2>
<p>An interface extending LitElement with reactive render() and
updated() methods.</p>
<section id="props-8" class="level3" data-number="7.2.1">
<h3 data-number="7.2.1"><span class="header-section-number">7.2.1</span>
Props:</h3>
<dl>
<dt><em>render</em></dt>
<dd>
A pre-bound Wrapper.reactive_wrapper() around LitElement.render().
</dd>
<dt><em>updated</em></dt>
<dd>
A pre-bound Wrapper.reactive_wrapper() around LitElement.updated().
</dd>
<dt><em>request_update_</em></dt>
<dd>
A pre-bound wrapper around LitElement.requestUpdate().
</dd>
</dl>
</section>
<section id="constants-2" class="level3" data-number="7.2.2">
<h3 data-number="7.2.2"><span class="header-section-number">7.2.2</span>
Constants</h3>
<dl>
<dt><span id="JsExtract"
data-4search="ui/little.js:JsExtract;export"><strong><code>JsExtract</code></strong></span></dt>
<dd>
<p>API to mark template strings for extraction and fetch extracted
assets.</p>
<ul>
<li><code>JsExtract.css`body { font-weight:bold; }`</code><br />
Mark CSS text inside a Javascript file for extration by
jsextract.js.</li>
<li><code>node jsextract.js inputfile.js</code><br />
Extract <code>JsExtract.css``</code> strings into
<code>inputfile.jscss</code>.</li>
<li><code>await JsExtract.fetch_css ('/path/to/inputfile.js');</code><br />
Use the browser <code>fetch()</code> API to retrieve the extracted
string as <code>text/css</code> from '/path/to/inputfile.css'.</li>
<li><code>JsExtract.fetch_css (import.meta);</code><br />
Variant of the above that utilizes <code>import.meta.url</code>.</li>
<li><code>JsExtract.css_url (import.meta);</code><br />
Variant of the above that just provides the stylesheet URL.</li>
</ul>
</dd>
</dl>
</section>
<section id="functions-7" class="level3" data-number="7.2.3">
<h3 data-number="7.2.3"><span class="header-section-number">7.2.3</span>
Functions</h3>
<dl>
<dt><span id="lit_update_all"
data-4search="ui/little.js:lit_update_all;func"><strong><code>lit_update_all</code></strong></span>
<code>(</code><em>root</em><code>)</code></dt>
<dd>
Call requestUpdate() on all <code>LitElement</code>s
</dd>
<dt><span id="css_url"
data-4search="ui/little.js:css_url;func"><strong><code>css_url</code></strong></span>
<code>(</code><em>base_url</em><code>)</code></dt>
<dd>
Construct the stylesheet URL from a base URL (enforcing
<code>.css</code> extension).
</dd>
<dt><span id="fetch_css"
data-4search="ui/little.js:fetch_css;func"><strong><code>fetch_css</code></strong></span>
<code>(</code><em>base_url</em><code>)</code></dt>
<dd>
Fetch (extracted) asset from a base URL (enforcing <code>.css</code>
extension) as "text/css"
</dd>
<dt><span id="adopt_component_styles"
data-4search="ui/little.js:adopt_component_styles;func"><strong><code>adopt_component_styles</code></strong></span>
<code>(</code><em>element</em><code>)</code></dt>
<dd>
Ensure that element has all stylesheets with [data-4litcomponent]
applied to it
</dd>
</dl>
</section>
<section id="constants-3" class="level3" data-number="7.2.4">
<h3 data-number="7.2.4"><span class="header-section-number">7.2.4</span>
Constants</h3>
<dl>
<dt><span id="CHROME_UA"
data-4search="ui/mouse.js:CHROME_UA;export"><strong><code>CHROME_UA</code></strong></span></dt>
<dd>
Flag indicating Chrome UserAgent.
</dd>
</dl>
</section>
<section id="functions-8" class="level3" data-number="7.2.5">
<h3 data-number="7.2.5"><span class="header-section-number">7.2.5</span>
Functions</h3>
<dl>
<dt><span id="chrome_movement_factor"
data-4search="ui/mouse.js:chrome_movement_factor;func"><strong><code>chrome_movement_factor</code></strong></span>
<code>()</code></dt>
<dd>
Determine factor for Chrome to convert movementX to CSS px (based on
event history)
</dd>
<dt><span id="event_movement"
data-4search="ui/mouse.js:event_movement;func"><strong><code>event_movement</code></strong></span>
<code>(</code><em>event, shift_swaps</em><code>)</code></dt>
<dd>
Determine <code>movementX,movementY</code> in CSS pixels, independent of
browser quirks.
</dd>
<dt><span id="wheel_delta"
data-4search="ui/mouse.js:wheel_delta;func"><strong><code>wheel_delta</code></strong></span>
<code>(</code><em>event, shift_swaps</em><code>)</code></dt>
<dd>
Determine mouse wheel deltas in bare units, independent of zoom or DPI.
This returns an object <code>{deltaX,deltaY}</code> with negative values
pointing LEFT/UP and positive values RIGHT/DOWN respectively. For zoom
step interpretation, the x/y pixel values should be reduced via
<code>Math.sign()</code>. For scales the pixel values might feel more
natural, because browsers sometimes increase the number of events with
increasing wheel distance, in other cases values are accumulated so
fewer events with larger deltas are sent instead. The members
<code>{x,y}</code> approximate the wheel delta in pixels.
</dd>
<dt><span id="zmove_last"
data-4search="ui/mouse.js:zmove_last;func"><strong><code>zmove_last</code></strong></span>
<code>()</code></dt>
<dd>
Peek at the last pointer coordination event.
</dd>
<dt><span id="zmove_add"
data-4search="ui/mouse.js:zmove_add;func"><strong><code>zmove_add</code></strong></span>
<code>(</code><em>hook</em><code>)</code></dt>
<dd>
Add hook to be called once the mouse position or stacking state changes,
returns deleter.
</dd>
<dt><span id="zmove_trigger"
data-4search="ui/mouse.js:zmove_trigger;func"><strong><code>zmove_trigger</code></strong></span>
<code>(</code><em>ev</em><code>)</code></dt>
<dd>
Trigger zmove hooks, this is useful to get debounced notifications for
pointer movements, including 0-distance moves after significant UI
changes.
</dd>
</dl>
</section>
<section id="functions-9" class="level3" data-number="7.2.6">
<h3 data-number="7.2.6"><span class="header-section-number">7.2.6</span>
Functions</h3>
<dl>
<dt><span id="tofloat"
data-4search="ui/postcss.js:tofloat;func"><strong><code>tofloat</code></strong></span>
<code>(</code><em>value, fallback, min, max</em><code>)</code></dt>
<dd>
Yield <code>value</code> as number in <code>[min..max]</code>, converts
percentages.
</dd>
<dt><span id="load_import"
data-4search="ui/postcss.js:load_import;func"><strong><code>load_import</code></strong></span>
<code>(</code><em>id, cwd, opts</em><code>)</code></dt>
<dd>
Load import files in nodejs to implement <code>@import</code>.
</dd>
<dt><span id="find_import"
data-4search="ui/postcss.js:find_import;func"><strong><code>find_import</code></strong></span>
<code>(</code><em>id, cwd, opts</em><code>)</code></dt>
<dd>
Provide canned CSS files or fetch css for use with <code>@import</code>.
</dd>
<dt><span id="add_import"
data-4search="ui/postcss.js:add_import;func"><strong><code>add_import</code></strong></span>
<code>(</code><em>filename, csstext</em><code>)</code></dt>
<dd>
Provide <code>filename</code> as <code>@import "filename";</code> source
with contents <code>csstext</code>.
</dd>
</dl>
</section>
</section>
<section id="scripthost" class="level2" data-number="7.3">
<h2 data-number="7.3"><span class="header-section-number">7.3</span>
<span id="ScriptHost"
data-4search="ui/script.js:ScriptHost;section">ScriptHost</span></h2>
<p>A ScriptHost object represents a Worker script in the Main
thread.</p>
<p>A ScriptHost object (defined in <code>script.js</code>) runs in the
Main Javascript thread. It starts a Worker via <code>host.js</code>
which creates a WorkerHost object in the Worker thread. The
ScriptHost&lt;-&gt;WorkerHost objects bridge needed API from the Main
thread to the Worker thread. The WorkerHost then loads and calls into a
user provided ES Module, the actual user script which communicates via
the WorkerHost global variable <code>host</code>. See also
#WorkerHost.</p>
<section id="functions-10" class="level3" data-number="7.3.1">
<h3 data-number="7.3.1"><span class="header-section-number">7.3.1</span>
Functions</h3>
<dl>
<dt><span id="count_newlines"
data-4search="ui/sfc-compile.js:count_newlines;func"><strong><code>count_newlines</code></strong></span>
<code>(</code><em>str</em><code>)</code></dt>
<dd>
Count newlines
</dd>
<dt><span id="find_tags"
data-4search="ui/sfc-compile.js:find_tags;func"><strong><code>find_tags</code></strong></span>
<code>(</code><em>string</em><code>)</code></dt>
<dd>
List tag names matching <code>^&lt;/tag&gt;</code> in
<code>string</code>.
</dd>
<dt><span id="process_file"
data-4search="ui/sfc-compile.js:process_file;func"><strong><code>process_file</code></strong></span>
<code>(</code><em>filename, config</em><code>)</code></dt>
<dd>
Extract and process sections of an SFC file.
</dd>
<dt><span id="write_style"
data-4search="ui/sfc-compile.js:write_style;func"><strong><code>write_style</code></strong></span>
<code>(</code><em>filename, ofile, config,
stylestring</em><code>)</code></dt>
<dd>
Process and write style information
</dd>
</dl>
</section>
<section id="functions-11" class="level3" data-number="7.3.2">
<h3 data-number="7.3.2"><span class="header-section-number">7.3.2</span>
Functions</h3>
<dl>
<dt><span id="jsonapi_finalization_registration"
data-4search="ui/startup.js:jsonapi_finalization_registration;func"><strong><code>jsonapi_finalization_registration</code></strong></span>
<code>(</code><em>object</em><code>)</code></dt>
<dd>
Jsonipc handler for object creation
</dd>
<dt><span id="jsonapi_finalization_gc"
data-4search="ui/startup.js:jsonapi_finalization_gc;func"><strong><code>jsonapi_finalization_gc</code></strong></span>
<code>(</code><em>gcinfo</em><code>)</code></dt>
<dd>
Jsonipc handler for IDs of GC-ed objects.
</dd>
</dl>
</section>
<section id="pointerdrag-class" class="level3" data-number="7.3.3">
<h3 data-number="7.3.3"><span class="header-section-number">7.3.3</span>
PointerDrag class</h3>
<dl>
<dt><em>class</em> <span id="PointerDrag"
data-4search="ui/util.js:PointerDrag;class"><strong>PointerDrag</strong></span></dt>
<dd>
Meld all pointer drag handling functions into a single
<code>drag_event(event,MODE)</code> method.
</dd>
</dl>
</section>
<section id="vue_mixins-class" class="level3" data-number="7.3.4">
<h3 data-number="7.3.4"><span class="header-section-number">7.3.4</span>
vue_mixins class</h3>
<dl>
<dt><em>class</em> <span id="vue_mixins"
data-4search="ui/util.js:vue_mixins;class"><strong>vue_mixins</strong></span></dt>
<dd>
<p>…</p>
<dl>
<dt><span id="vuechildren"
data-4search="ui/util.js:vuechildren;func"><strong><code>vuechildren</code></strong></span>
<code>()</code>   <code>[static]</code></dt>
<dd>
Provide <code>$children</code> (and <code>$vue_parent</code>) on every
component.
</dd>
<dt><span id="autodataattrs"
data-4search="ui/util.js:autodataattrs;func"><strong><code>autodataattrs</code></strong></span>
<code>()</code>   <code>[static]</code></dt>
<dd>
Automatically add <code>$attrs['data-*']</code> to <code>$el</code>.
</dd>
<dt><span id="dom_updates"
data-4search="ui/util.js:dom_updates;func"><strong><code>dom_updates</code></strong></span>
<code>()</code>   <code>[static]</code></dt>
<dd>
<p>Vue mixin to provide DOM handling hooks. This mixin adds instance
method callbacks to handle dynamic DOM changes such as drawing into a
<code>&lt;canvas/&gt;</code>. Reactive callback methods have their data
dependencies tracked, so future changes to data dependencies of reactive
methods will queue future updates. However reactive dependency tracking
only works for non-async methods.</p>
<ul>
<li>dom_create() - Called after <code>this.$el</code> has been
created</li>
<li>dom_change() - Called after <code>this.$el</code> has been
reassigned or changed. Note, may also be called for
<code>v-if="false"</code> cases.</li>
<li>dom_update() - Reactive callback method, called with a valid
<code>this.$el</code> and after Vue component updates. Dependency
changes result in <code>this.$forceUpdate()</code>.</li>
<li>dom_draw() - Reactive callback method, called during an animation
frame, requested via <code>dom_queue_draw()</code>. Dependency changes
result in <code>this.dom_queue_draw()</code>.</li>
<li>dom_queue_draw() - Cause <code>this.dom_draw()</code> to be called
during the next animation frame.</li>
<li>dom_destroy() - Callback method, called once <code>this.$el</code>
is removed.</li>
</ul>
</dd>
</dl>
</dd>
</dl>
</section>
<section id="constants-4" class="level3" data-number="7.3.5">
<h3 data-number="7.3.5"><span class="header-section-number">7.3.5</span>
Constants</h3>
<dl>
<dt><span id="ResizeObserver"
data-4search="ui/util.js:ResizeObserver;export"><strong><code>ResizeObserver</code></strong></span></dt>
<dd>
Work around FireFox 68 having ResizeObserver disabled
</dd>
<dt><span id="clone_descriptors"
data-4search="ui/util.js:clone_descriptors;export"><strong><code>clone_descriptors</code></strong></span></dt>
<dd>
Copy PropertyDescriptors from source to target, optionally binding
handlers against closure.
</dd>
</dl>
</section>
<section id="functions-12" class="level3" data-number="7.3.6">
<h3 data-number="7.3.6"><span class="header-section-number">7.3.6</span>
Functions</h3>
<dl>
<dt><span id="now"
data-4search="ui/util.js:now;func"><strong><code>now</code></strong></span>
<code>()</code></dt>
<dd>
Retrieve current time in milliseconds.
</dd>
<dt><span id="frame_stamp"
data-4search="ui/util.js:frame_stamp;func"><strong><code>frame_stamp</code></strong></span>
<code>()</code></dt>
<dd>
Retrieve a timestamp that is unique per (animation) frame.
</dd>
<dt><span id="debounce"
data-4search="ui/util.js:debounce;func"><strong><code>debounce</code></strong></span>
<code>(</code><em>callback, options</em><code>)</code></dt>
<dd>
<p>Yield a wrapper function for <code>callback</code> that throttles
invocations. Regardless of the frequency of calls to the returned
wrapper, <code>callback</code> will only be called once per
<code>requestAnimationFrame()</code> cycle, or after
<code>milliseconds</code>. The return value of the wrapper functions is
the value of the last callback invocation. A <code>cancel()</code>
method can be called on the returned wrapper to cancel the next pending
<code>callback</code> invocation. Options:</p>
<ul>
<li><code>wait</code> - number of milliseconds to pass until
<code>callback</code> may be called.</li>
<li><code>restart</code> - always restart the timer once the wrapper is
called.</li>
<li><code>immediate</code> - immediately invoke <code>callback</code>
and then start the timeout period.</li>
</ul>
</dd>
<dt><span id="capture_event"
data-4search="ui/util.js:capture_event;func"><strong><code>capture_event</code></strong></span>
<code>(</code><em>eventname, callback</em><code>)</code></dt>
<dd>
Process all events of type <code>eventname</code> with a single callback
exclusively
</dd>
<dt><span id="coalesced_events"
data-4search="ui/util.js:coalesced_events;func"><strong><code>coalesced_events</code></strong></span>
<code>(</code><em>event</em><code>)</code></dt>
<dd>
Expand pointer events into a list of possibly coalesced events.
</dd>
<dt><span id="vue_component"
data-4search="ui/util.js:vue_component;func"><strong><code>vue_component</code></strong></span>
<code>(</code><em>element</em><code>)</code></dt>
<dd>
Get Vue component handle from element or its ancestors
</dd>
<dt><span id="envue_object"
data-4search="ui/util.js:envue_object;func"><strong><code>envue_object</code></strong></span>
<code>(</code><em>element</em><code>)</code></dt>
<dd>
Get Envue <code>$object</code> from element or its ancestors
</dd>
<dt><span id="drag_event"
data-4search="ui/util.js:drag_event;func"><strong><code>drag_event</code></strong></span>
<code>(</code><em>event</em><code>)</code></dt>
<dd>
Start <code>drag_event (event)</code> handling on a Vue component's
element, use <code>@pointerdown="drag_event"</code>
</dd>
<dt><span id="unrequest_pointer_lock"
data-4search="ui/util.js:unrequest_pointer_lock;func"><strong><code>unrequest_pointer_lock</code></strong></span>
<code>(</code><em>element</em><code>)</code></dt>
<dd>
Clear (pending) pointer locks Clear an existing pointer lock on
<code>element</code> if any and ensure it does not get a pointer lock
granted unless request_pointer_lock() is called on it again.
</dd>
<dt><span id="has_pointer_lock"
data-4search="ui/util.js:has_pointer_lock;func"><strong><code>has_pointer_lock</code></strong></span>
<code>(</code><em>element</em><code>)</code></dt>
<dd>
<p>Check if <code>element</code> has a (pending) pointer lock
Return:</p>
<ul>
<li>2- if <code>element</code> has the pointer lock;</li>
<li>1- if the pointer lock is pending;</li>
<li>0- otherwise.</li>
</ul>
</dd>
<dt><span id="request_pointer_lock"
data-4search="ui/util.js:request_pointer_lock;func"><strong><code>request_pointer_lock</code></strong></span>
<code>(</code><em>element</em><code>)</code></dt>
<dd>
Request a pointer lock on <code>element</code> and track its state Use
this function to maintain pointer locks to avoid stuck locks that can
get granted <em>after</em> exitPointerLock() has been called.
</dd>
<dt><span id="adopt_style"
data-4search="ui/util.js:adopt_style;func"><strong><code>adopt_style</code></strong></span>
<code>(</code><em>element, csstext,
stylesheet_name</em><code>)</code></dt>
<dd>
Ensure the root node of <code>element</code> contains a
<code>csstext</code> (replaceable via <code>stylesheet_name</code>)
</dd>
<dt><span id="add_style_sheet"
data-4search="ui/util.js:add_style_sheet;func"><strong><code>add_style_sheet</code></strong></span>
<code>(</code><em>element, url</em><code>)</code></dt>
<dd>
Ensure the root node of <code>element</code> has a <code>url</code>
stylesheet link.
</dd>
<dt><span id="vm_scope_selector"
data-4search="ui/util.js:vm_scope_selector;func"><strong><code>vm_scope_selector</code></strong></span>
<code>(</code><em>vm</em><code>)</code></dt>
<dd>
Retrieve CSS scope selector for vm_scope_style()
</dd>
<dt><span id="vm_scope_style"
data-4search="ui/util.js:vm_scope_style;func"><strong><code>vm_scope_style</code></strong></span>
<code>(</code><em>vm, css</em><code>)</code></dt>
<dd>
Attach <code>css</code> to Vue instance <code>vm</code>, use
vm_scope_selector() for the <code>vm</code> CSS scope
</dd>
<dt><span id="assign_forin"
data-4search="ui/util.js:assign_forin;func"><strong><code>assign_forin</code></strong></span>
<code>(</code><em>target, source</em><code>)</code></dt>
<dd>
Loop over all properties in <code>source</code> and assign to `target
</dd>
<dt><span id="assign_forof"
data-4search="ui/util.js:assign_forof;func"><strong><code>assign_forof</code></strong></span>
<code>(</code><em>target, source</em><code>)</code></dt>
<dd>
Loop over all elements of <code>source</code> and assign to `target
</dd>
<dt><span id="array_remove"
data-4search="ui/util.js:array_remove;func"><strong><code>array_remove</code></strong></span>
<code>(</code><em>array, item</em><code>)</code></dt>
<dd>
Remove element <code>item</code> from <code>array</code> if present via
<code>indexOf</code>
</dd>
<dt><span id="array_index_equals"
data-4search="ui/util.js:array_index_equals;func"><strong><code>array_index_equals</code></strong></span>
<code>(</code><em>array, item</em><code>)</code></dt>
<dd>
Find <code>array</code> index of element that equals <code>item</code>
</dd>
<dt><span id="map_from_kvpairs"
data-4search="ui/util.js:map_from_kvpairs;func"><strong><code>map_from_kvpairs</code></strong></span>
<code>(</code><em>kvarray</em><code>)</code></dt>
<dd>
Generate map by splitting the key=value pairs in <code>kvarray</code>
</dd>
<dt><span id="range"
data-4search="ui/util.js:range;func"><strong><code>range</code></strong></span>
<code>(</code><em>bound, end, step</em><code>)</code></dt>
<dd>
Generate integers [0..<code>bound</code>[ if one arg is given or
[<code>bound</code>..<code>end</code>[ by incrementing
<code>step</code>.
</dd>
<dt><span id="freeze_deep"
data-4search="ui/util.js:freeze_deep;func"><strong><code>freeze_deep</code></strong></span>
<code>(</code><em>object</em><code>)</code></dt>
<dd>
Freeze object and its properties
</dd>
<dt><span id="copy_deep"
data-4search="ui/util.js:copy_deep;func"><strong><code>copy_deep</code></strong></span>
<code>(</code><em>src</em><code>)</code></dt>
<dd>
Create a new object that has the same properties and Array values as
<code>src</code>
</dd>
<dt><span id="equals_recursively"
data-4search="ui/util.js:equals_recursively;func"><strong><code>equals_recursively</code></strong></span>
<code>(</code><em>a, b</em><code>)</code></dt>
<dd>
Check if <code>a == b</code>, recursively if the arguments are of type
Array or Object
</dd>
<dt><span id="clamp"
data-4search="ui/util.js:clamp;func"><strong><code>clamp</code></strong></span>
<code>(</code><em>x, min, max</em><code>)</code></dt>
<dd>
Return 1 x clamped into 1 min and 1 max.
</dd>
<dt><span id="fwdprovide"
data-4search="ui/util.js:fwdprovide;func"><strong><code>fwdprovide</code></strong></span>
<code>(</code><em>injectname, keys</em><code>)</code></dt>
<dd>
Create a Vue component provide() function that forwards selected
properties.
</dd>
<dt><span id="hyphenate"
data-4search="ui/util.js:hyphenate;func"><strong><code>hyphenate</code></strong></span>
<code>(</code><em>string</em><code>)</code></dt>
<dd>
Generate a kebab-case ('two-words') identifier from a camelCase
('twoWords') identifier
</dd>
<dt><span id="weakid"
data-4search="ui/util.js:weakid;func"><strong><code>weakid</code></strong></span>
<code>(</code><em>object</em><code>)</code></dt>
<dd>
Fetch a unique id for any object.
</dd>
<dt><span id="weakid_lookup"
data-4search="ui/util.js:weakid_lookup;func"><strong><code>weakid_lookup</code></strong></span>
<code>(</code><em>id</em><code>)</code></dt>
<dd>
Find an object from its unique id.
</dd>
<dt><span id="uuname"
data-4search="ui/util.js:uuname;func"><strong><code>uuname</code></strong></span>
<code>(</code><em>object</em><code>)</code></dt>
<dd>
Get a universally unique name for any object.
</dd>
<dt><span id="join_classes"
data-4search="ui/util.js:join_classes;func"><strong><code>join_classes</code></strong></span>
<code>(</code><em>args</em><code>)</code></dt>
<dd>
Join strings and arrays of class lists from <code>args</code>.
</dd>
<dt><span id="object_zip"
data-4search="ui/util.js:object_zip;func"><strong><code>object_zip</code></strong></span>
<code>(</code><em>obj, keys, values</em><code>)</code></dt>
<dd>
Assign <code>obj[k] = v</code> for all
<code>k of keys, v of values</code>.
</dd>
<dt><span id="object_await_values"
data-4search="ui/util.js:object_await_values;func"><strong><code>object_await_values</code></strong></span>
<code>(</code><em>obj</em><code>)</code></dt>
<dd>
Await and reassign all object fields.
</dd>
<dt><span id="extend_property"
data-4search="ui/util.js:extend_property;func"><strong><code>extend_property</code></strong></span>
<code>(</code><em>prop, disconnector, augment</em><code>)</code></dt>
<dd>
Extend Ase.Property objects with cached attributs. Note, for automatic
<code>.value_</code> updates, a <code>disconnector</code> function must
be provided as second argument, to handle disconnection of property
change notifications once the property is not needed anymore.
</dd>
<dt><span id="promise_state"
data-4search="ui/util.js:promise_state;func"><strong><code>promise_state</code></strong></span>
<code>(</code><em>p</em><code>)</code></dt>
<dd>
Extract the promise <code>p</code> state as one of: 'pending',
'fulfilled', 'rejected'
</dd>
<dt><span id="compile_expression"
data-4search="ui/util.js:compile_expression;func"><strong><code>compile_expression</code></strong></span>
<code>(</code><em>expression, context</em><code>)</code></dt>
<dd>
Turn a JS <code>$event</code> handler expression into a function. This
yields a factory function that binds the scope to create an expression
handler.
</dd>
<dt><span id="VueifyObject"
data-4search="ui/util.js:VueifyObject;func"><strong><code>VueifyObject</code></strong></span>
<code>(</code><em>object, vue_options</em><code>)</code></dt>
<dd>
VueifyObject - turn a regular object into a Vue instance. The
<em>object</em> passed in is used as the Vue <code>data</code> object.
Properties with a getter (and possibly setter) are turned into Vue
<code>computed</code> properties, methods are carried over as
<code>methods</code> on the Vue() instance.
</dd>
<dt><span id="fnv1a_hash"
data-4search="ui/util.js:fnv1a_hash;func"><strong><code>fnv1a_hash</code></strong></span>
<code>(</code><em>str</em><code>)</code></dt>
<dd>
Produce hash code from a String, using an FNV-1a variant.
</dd>
<dt><span id="split_comma"
data-4search="ui/util.js:split_comma;func"><strong><code>split_comma</code></strong></span>
<code>(</code><em>str</em><code>)</code></dt>
<dd>
Split a string when encountering a comma, while preserving quoted or
parenthesized segments.
</dd>
<dt><span id="escape_html"
data-4search="ui/util.js:escape_html;func"><strong><code>escape_html</code></strong></span>
<code>(</code><em>unsafe</em><code>)</code></dt>
<dd>
Properly escape test into <code>&amp;amp;</code> and related sequences.
</dd>
<dt><span id="parse_hex_color"
data-4search="ui/util.js:parse_hex_color;func"><strong><code>parse_hex_color</code></strong></span>
<code>(</code><em>colorstr</em><code>)</code></dt>
<dd>
Parse hexadecimal CSS color with 3 or 6 digits into [ R, G, B ].
</dd>
<dt><span id="parse_hex_luminosity"
data-4search="ui/util.js:parse_hex_luminosity;func"><strong><code>parse_hex_luminosity</code></strong></span>
<code>(</code><em>colorstr</em><code>)</code></dt>
<dd>
Parse hexadecimal CSS color into luminosity.
</dd>
<dt><span id="parse_hex_brightness"
data-4search="ui/util.js:parse_hex_brightness;func"><strong><code>parse_hex_brightness</code></strong></span>
<code>(</code><em>colorstr</em><code>)</code></dt>
<dd>
Parse hexadecimal CSS color into brightness.
</dd>
<dt><span id="parse_hex_pgrey"
data-4search="ui/util.js:parse_hex_pgrey;func"><strong><code>parse_hex_pgrey</code></strong></span>
<code>(</code><em>colorstr</em><code>)</code></dt>
<dd>
Parse hexadecimal CSS color into perception corrected grey.
</dd>
<dt><span id="parse_hex_average"
data-4search="ui/util.js:parse_hex_average;func"><strong><code>parse_hex_average</code></strong></span>
<code>(</code><em>colorstr</em><code>)</code></dt>
<dd>
Parse hexadecimal CSS color into average grey.
</dd>
<dt><span id="parse_colors"
data-4search="ui/util.js:parse_colors;func"><strong><code>parse_colors</code></strong></span>
<code>(</code><em>colorstr</em><code>)</code></dt>
<dd>
Parse CSS colors (via invisible DOM element) and yield an array of rgba
tuples.
</dd>
<dt><span id="compute_style_properties"
data-4search="ui/util.js:compute_style_properties;func"><strong><code>compute_style_properties</code></strong></span>
<code>(</code><em>el, obj</em><code>)</code></dt>
<dd>
Retrieve a new object with the properties of <code>obj</code> resolved
against the style of <code>el</code>
</dd>
<dt><span id="inside_display_none"
data-4search="ui/util.js:inside_display_none;func"><strong><code>inside_display_none</code></strong></span>
<code>(</code><em>element</em><code>)</code></dt>
<dd>
Check if <code>element</code> or any parentElement has
<code>display:none</code>
</dd>
<dt><span id="is_displayed"
data-4search="ui/util.js:is_displayed;func"><strong><code>is_displayed</code></strong></span>
<code>(</code><em>element</em><code>)</code></dt>
<dd>
Check if <code>element</code> is displayed (has width/height assigned)
</dd>
<dt><span id="setup_shield_element"
data-4search="ui/util.js:setup_shield_element;func"><strong><code>setup_shield_element</code></strong></span>
<code>(</code><em>shield, containee, closer,
capture_escape</em><code>)</code></dt>
<dd>
Setup Element shield for a modal containee. Capture focus movements
inside <code>containee</code>, call <code>closer(event)</code> for
pointer clicks on <code>shield</code> or when <code>ESCAPE</code> is
pressed.
</dd>
<dt><span id="fullstop"
data-4search="ui/util.js:fullstop;func"><strong><code>fullstop</code></strong></span>
<code>(</code><em>event</em><code>)</code></dt>
<dd>
Stop (immediate) propagation and prevent default handler for an event.
</dd>
<dt><span id="swallow_event"
data-4search="ui/util.js:swallow_event;func"><strong><code>swallow_event</code></strong></span>
<code>(</code><em>type, timeout</em><code>)</code></dt>
<dd>
Use capturing to swallow any <code>type</code> events until
<code>timeout</code> has passed
</dd>
<dt><span id="prevent_event"
data-4search="ui/util.js:prevent_event;func"><strong><code>prevent_event</code></strong></span>
<code>(</code><em>event_or_null</em><code>)</code></dt>
<dd>
Prevent default or any propagation for a possible event.
</dd>
<dt><span id="dialog_backdrop_mousedown"
data-4search="ui/util.js:dialog_backdrop_mousedown;func"><strong><code>dialog_backdrop_mousedown</code></strong></span>
<code>(</code><em>ev</em><code>)</code></dt>
<dd>
Close dialog on backdrop clicks via hiding at mousedown
</dd>
<dt><span id="dialog_backdrop_mouseup"
data-4search="ui/util.js:dialog_backdrop_mouseup;func"><strong><code>dialog_backdrop_mouseup</code></strong></span>
<code>(</code><em>ev</em><code>)</code></dt>
<dd>
Close dialog on backdrop clicks via actual closing at mouseup
</dd>
<dt><span id="dialog_backdrop_autoclose"
data-4search="ui/util.js:dialog_backdrop_autoclose;func"><strong><code>dialog_backdrop_autoclose</code></strong></span>
<code>(</code><em>dialog, install_or_remove</em><code>)</code></dt>
<dd>
Install handlers to close a dialog on backdrop clicks.
</dd>
<dt><span id="popup_position"
data-4search="ui/util.js:popup_position;func"><strong><code>popup_position</code></strong></span>
<code>(</code><em>element, opts</em><code>)</code></dt>
<dd>
Determine position for a popup
</dd>
<dt><span id="resize_canvas"
data-4search="ui/util.js:resize_canvas;func"><strong><code>resize_canvas</code></strong></span>
<code>(</code><em>canvas, csswidth, cssheight,
fill_style</em><code>)</code></dt>
<dd>
Resize canvas display size (CSS size) and resize backing store to match
hardware pixels
</dd>
<dt><span id="dash_xto"
data-4search="ui/util.js:dash_xto;func"><strong><code>dash_xto</code></strong></span>
<code>(</code><em>ctx, x, y, w, d</em><code>)</code></dt>
<dd>
Draw a horizontal line from (x,y) of width <code>w</code> with dashes
<code>d</code>
</dd>
<dt><span id="hstippleRect"
data-4search="ui/util.js:hstippleRect;func"><strong><code>hstippleRect</code></strong></span>
<code>(</code><em>ctx, x, y, width, height,
stipple</em><code>)</code></dt>
<dd>
Draw a horizontal rect <code>(x,y,width,height)</code> with pixel gaps
of width <code>stipple</code>
</dd>
<dt><span id="roundRect"
data-4search="ui/util.js:roundRect;func"><strong><code>roundRect</code></strong></span>
<code>(</code><em>ctx, x, y, width, height, radius, fill,
stroke</em><code>)</code></dt>
<dd>
Fill and stroke a canvas rectangle with rounded corners.
</dd>
<dt><span id="gradient_apply_stops"
data-4search="ui/util.js:gradient_apply_stops;func"><strong><code>gradient_apply_stops</code></strong></span>
<code>(</code><em>grad, stoparray</em><code>)</code></dt>
<dd>
Add color stops from <code>stoparray</code> to <code>grad</code>,
<code>stoparray</code> is an array: [(offset,color)...]
</dd>
<dt><span id="linear_gradient_from"
data-4search="ui/util.js:linear_gradient_from;func"><strong><code>linear_gradient_from</code></strong></span>
<code>(</code><em>ctx, stoparray, x1, y1, x2, y2</em><code>)</code></dt>
<dd>
Create a new linear gradient at (x1,y1,x2,y2) with color stops
<code>stoparray</code>
</dd>
<dt><span id="canvas_ink_vspan"
data-4search="ui/util.js:canvas_ink_vspan;func"><strong><code>canvas_ink_vspan</code></strong></span>
<code>(</code><em>font_style, textish</em><code>)</code></dt>
<dd>
Measure ink span of a canvas text string or an array
</dd>
<dt><span id="midi_label"
data-4search="ui/util.js:midi_label;func"><strong><code>midi_label</code></strong></span>
<code>(</code><em>numish</em><code>)</code></dt>
<dd>
Retrieve the 'C-1' .. 'G8' label for midi note numbers
</dd>
<dt><span id="align8"
data-4search="ui/util.js:align8;func"><strong><code>align8</code></strong></span>
<code>(</code><em>int</em><code>)</code></dt>
<dd>
Align integer value to 8.
</dd>
<dt><span id="telemetry_subscribe"
data-4search="ui/util.js:telemetry_subscribe;func"><strong><code>telemetry_subscribe</code></strong></span>
<code>(</code><em>fun, telemetryfields</em><code>)</code></dt>
<dd>
Call <code>fun</code> for telemtry updates, returns unsubscribe handler.
</dd>
<dt><span id="telemetry_unsubscribe"
data-4search="ui/util.js:telemetry_unsubscribe;func"><strong><code>telemetry_unsubscribe</code></strong></span>
<code>(</code><em>telemetryobject</em><code>)</code></dt>
<dd>
Call <code>fun</code> for telemtry updates, returns unsubscribe handler.
</dd>
<dt><span id="in_keyboard_click"
data-4search="ui/util.js:in_keyboard_click;func"><strong><code>in_keyboard_click</code></strong></span>
<code>()</code></dt>
<dd>
Check if the current click event originates from keyboard activation.
</dd>
<dt><span id="keyboard_click_event"
data-4search="ui/util.js:keyboard_click_event;func"><strong><code>keyboard_click_event</code></strong></span>
<code>(</code><em>fallback</em><code>)</code></dt>
<dd>
Retrieve event that triggers keyboard_click().
</dd>
<dt><span id="keyboard_click"
data-4search="ui/util.js:keyboard_click;func"><strong><code>keyboard_click</code></strong></span>
<code>(</code><em>element, event, callclick</em><code>)</code></dt>
<dd>
Trigger element click via keyboard.
</dd>
<dt><span id="in_array"
data-4search="ui/util.js:in_array;func"><strong><code>in_array</code></strong></span>
<code>(</code><em>element, array</em><code>)</code></dt>
<dd>
Check whether <code>element</code> is contained in <code>array</code>
</dd>
<dt><span id="matches_forof"
data-4search="ui/util.js:matches_forof;func"><strong><code>matches_forof</code></strong></span>
<code>(</code><em>element, iteratable</em><code>)</code></dt>
<dd>
Check whether <code>element</code> is found during
<code>for (... of iteratable)</code>
</dd>
<dt><span id="element_text"
data-4search="ui/util.js:element_text;func"><strong><code>element_text</code></strong></span>
<code>(</code><em>element, filter</em><code>)</code></dt>
<dd>
Extract filtered text nodes from Element.
</dd>
<dt><span id="clone_menu_icon"
data-4search="ui/util.js:clone_menu_icon;func"><strong><code>clone_menu_icon</code></strong></span>
<code>(</code><em>menu, uri, title</em><code>)</code></dt>
<dd>
Clone a menuitem icon via its <code>uri</code>.
</dd>
<dt><span id="keyboard_map_name"
data-4search="ui/util.js:keyboard_map_name;func"><strong><code>keyboard_map_name</code></strong></span>
<code>(</code><em>keyname</em><code>)</code></dt>
<dd>
Retrieve user-printable name for a keyboard button, useful to describe
KeyboardEvent.code.
</dd>
<dt><span id="has_ancestor"
data-4search="ui/util.js:has_ancestor;func"><strong><code>has_ancestor</code></strong></span>
<code>(</code><em>node, ancestor,
escape_shadowdom</em><code>)</code></dt>
<dd>
Check if <code>ancestor</code> is an ancestor of <code>node</code>,
maybe including shadowRoot elements.
</dd>
<dt><span id="closest"
data-4search="ui/util.js:closest;func"><strong><code>closest</code></strong></span>
<code>(</code><em>element, selector</em><code>)</code></dt>
<dd>
Find the closest element or parent matching <code>selector</code>,
traversing shadow DOMs.
</dd>
<dt><span id="root_ancestor"
data-4search="ui/util.js:root_ancestor;func"><strong><code>root_ancestor</code></strong></span>
<code>(</code><em>element</em><code>)</code></dt>
<dd>
Retrieve root ancestor of <code>element</code>
</dd>
<dt><span id="find_element_from_point"
data-4search="ui/util.js:find_element_from_point;func"><strong><code>find_element_from_point</code></strong></span>
<code>(</code><em>root, x, y, predicate, visited</em><code>)</code></dt>
<dd>
Find an element at <code>(x,y)</code> for which
<code>predicate (element)</code> is true.
</dd>
<dt><span id="create_note"
data-4search="ui/util.js:create_note;func"><strong><code>create_note</code></strong></span>
<code>(</code><em>text, timeout</em><code>)</code></dt>
<dd>
Show a notification popup, with adequate default timeout
</dd>
<dt><span id="markdown_to_html"
data-4search="ui/util.js:markdown_to_html;func"><strong><code>markdown_to_html</code></strong></span>
<code>(</code><em>element, markdown_text</em><code>)</code></dt>
<dd>
Generate <code>element.innerHTML</code> from <code>markdown_text</code>
</dd>
<dt><span id="assign_async_cleanup"
data-4search="ui/util.js:assign_async_cleanup;func"><strong><code>assign_async_cleanup</code></strong></span>
<code>(</code><em>map, key, cleaner</em><code>)</code></dt>
<dd>
Assign <code>map[key] = cleaner</code>, while awaiting and calling any
previously existing cleanup function
</dd>
<dt><span id="observable_force_update"
data-4search="ui/util.js:observable_force_update;func"><strong><code>observable_force_update</code></strong></span>
<code>()</code></dt>
<dd>
Method to be added to a <code>observable_from_getters()</code> result to
force updates.
</dd>
<dt><span id="observable_from_getters"
data-4search="ui/util.js:observable_from_getters;func"><strong><code>observable_from_getters</code></strong></span>
<code>(</code><em>tmpl, predicate</em><code>)</code></dt>
<dd>
<p>Create a reactive dict from the fields in <code>tmpl</code> with
async callbacks.</p>
<p>Once the resolved result from <code>predicate()</code> changes and
becomes true-ish, the <code>getter()</code> of each field in
<code>tmpl</code> is called, resolved and assigned to the corresponding
field in the observable binding returned from this function. Optionally,
fields may provide a <code>notify</code> setup handler to install a
notification callback that re-invokes the <code>getter</code>. A
destructor can be returned from <code>notify()</code> once resolved,
that is executed during cleanup phases. The <code>default</code> of each
field in <code>tmpl</code> may provide an initial value before
<code>getter</code> is called the first time and in case
<code>predicate()</code> becomes false-ish. The first argument to
<code>getter()</code> is a function that can be used to register cleanup
code for the getter result.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> data <span class="op">=</span> {</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">val</span><span class="op">:</span> { <span class="dt">getter</span><span class="op">:</span> c <span class="kw">=&gt;</span> <span class="fu">async_fetch</span>()<span class="op">,</span> <span class="dt">notify</span><span class="op">:</span> n <span class="kw">=&gt;</span> <span class="fu">add_listener</span> (n)<span class="op">,</span> }<span class="op">,</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>dict <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">observable_from_getters</span> (data<span class="op">,</span> () <span class="kw">=&gt;</span> <span class="kw">this</span><span class="op">.</span><span class="fu">predicate</span>())<span class="op">;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co">// use dict.val</span></span></code></pre></div>
<p>When the <code>n()</code> callback is called, a new <em>getter</em>
call is scheduled. A handler can be registered with
<code>c (cleanup);</code> to cleanup resources left over from an
<code>async_fetch()</code> call.</p>
</dd>
<dt><span id="tmplstr"
data-4search="ui/util.js:tmplstr;func"><strong><code>tmplstr</code></strong></span>
<code>(</code><em>a, e</em><code>)</code></dt>
<dd>
Join template literal arguments into a String
</dd>
<dt><span id="strpad"
data-4search="ui/util.js:strpad;func"><strong><code>strpad</code></strong></span>
<code>(</code><em>string, len, fill</em><code>)</code></dt>
<dd>
Pad <code>string</code> with <code>fill</code> until its length is
<code>len</code>
</dd>
<dt><span id="lrstrip"
data-4search="ui/util.js:lrstrip;func"><strong><code>lrstrip</code></strong></span>
<code>(</code><em>str</em><code>)</code></dt>
<dd>
Strip whitespace from start and end of string.
</dd>
<dt><span id="collect_text_content"
data-4search="ui/util.js:collect_text_content;func"><strong><code>collect_text_content</code></strong></span>
<code>(</code><em>node_or_array</em><code>)</code></dt>
<dd>
Gather text content from <code>node_or_array</code>.
</dd>
<dt><span id="hash53"
data-4search="ui/util.js:hash53;func"><strong><code>hash53</code></strong></span>
<code>(</code><em>key, seed</em><code>)</code></dt>
<dd>
Generate 53-Bit hash from <code>key</code>.
</dd>
<dt><span id="add_destroy_callback"
data-4search="ui/util.js:add_destroy_callback;func"><strong><code>add_destroy_callback</code></strong></span>
<code>(</code><em>callback</em><code>)</code></dt>
<dd>
Add a <code>callback</code> to <code>this</code> to be called from
<code>call_destroy_callbacks()</code>.
</dd>
<dt><span id="del_destroy_callback"
data-4search="ui/util.js:del_destroy_callback;func"><strong><code>del_destroy_callback</code></strong></span>
<code>(</code><em>callback</em><code>)</code></dt>
<dd>
Remove a <code>callback</code> from <code>this</code>, previously added
via <code>add_destroy_callback()</code>.
</dd>
<dt><span id="call_destroy_callbacks"
data-4search="ui/util.js:call_destroy_callbacks;func"><strong><code>call_destroy_callbacks</code></strong></span>
<code>()</code></dt>
<dd>
Call destroy callbacks of <code>this</code>, clears the callback list.
</dd>
</dl>
</section>
</section>
<section id="asecachingwrapper" class="level2" data-number="7.4">
<h2 data-number="7.4"><span class="header-section-number">7.4</span>
<span id="AseCachingWrapper"
data-4search="ui/wrapper.js:AseCachingWrapper;section">AseCachingWrapper</span></h2>
<p>Caching wrapper for ASE classes</p>
<section id="asecachingwrapper-class" class="level3"
data-number="7.4.1">
<h3 data-number="7.4.1"><span class="header-section-number">7.4.1</span>
AseCachingWrapper class</h3>
<dl>
<dt><em>class</em> <span id="AseCachingWrapper"
data-4search="ui/wrapper.js:AseCachingWrapper;class"><strong>AseCachingWrapper</strong></span></dt>
<dd>
<p>…</p>
<dl>
<dt><span id="__add__"
data-4search="ui/wrapper.js:__add__;func"><strong><code>__add__</code></strong></span>
<code>(</code><em>prop, defaultvalue, callback</em><code>)</code></dt>
<dd>
Add property to cache
</dd>
<dt><span id="__del__"
data-4search="ui/wrapper.js:__del__;func"><strong><code>__del__</code></strong></span>
<code>(</code><em>prop, callback</em><code>)</code></dt>
<dd>
Remove property caching request
</dd>
<dt><span id="__cleanup__"
data-4search="ui/wrapper.js:__cleanup__;func"><strong><code>__cleanup__</code></strong></span>
<code>()</code></dt>
<dd>
Remove all references
</dd>
</dl>
</dd>
</dl>
</section>
<section id="constants-5" class="level3" data-number="7.4.2">
<h3 data-number="7.4.2"><span class="header-section-number">7.4.2</span>
Constants</h3>
<dl>
<dt><span id="finalization_cleanup_registry"
data-4search="ui/wrapper.js:finalization_cleanup_registry;var"><strong><code>finalization_cleanup_registry</code></strong></span></dt>
<dd>
FinalizationRegistry to call cleanup callback upon object destruction.
</dd>
</dl>
</section>
<section id="functions-13" class="level3" data-number="7.4.3">
<h3 data-number="7.4.3"><span class="header-section-number">7.4.3</span>
Functions</h3>
<dl>
<dt><span id="wrap_ase_object"
data-4search="ui/wrapper.js:wrap_ase_object;func"><strong><code>wrap_ase_object</code></strong></span>
<code>(</code><em>aseobj, fields, callback</em><code>)</code></dt>
<dd>
Wrap AseObject to cache properties and support <strong>add</strong>,
<strong>cleanup</strong> and auto cleanup.
</dd>
<dt><span id="define_reactive"
data-4search="ui/wrapper.js:define_reactive;func"><strong><code>define_reactive</code></strong></span>
<code>(</code><em>object, properties_object</em><code>)</code></dt>
<dd>
Define reactive properties on <code>object</code>, to be used with
reactive_wrapper(). See also <a
href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperties">Object.defineProperties</a>.
</dd>
<dt><span id="reactive_wrapper"
data-4search="ui/wrapper.js:reactive_wrapper;func"><strong><code>reactive_wrapper</code></strong></span>
<code>(</code><em>effect, notifier, keepwatching</em><code>)</code></dt>
<dd>
Make <code>effect()</code> wrapper to watch reactive properties, on
changes run <code>notifier()</code>.
</dd>
</dl>
</section>
<section id="functions-14" class="level3" data-number="7.4.4">
<h3 data-number="7.4.4"><span class="header-section-number">7.4.4</span>
Functions</h3>
<dl>
<dt><span id="lrstrip"
data-4search="ui/xbcomments.js:lrstrip;func"><strong><code>lrstrip</code></strong></span>
<code>(</code><em>str</em><code>)</code></dt>
<dd>
Strip whitespace from start and end of string.
</dd>
<dt><span id="fix_indent"
data-4search="ui/xbcomments.js:fix_indent;func"><strong><code>fix_indent</code></strong></span>
<code>(</code><em>txt</em><code>)</code></dt>
<dd>
Remove C-comment style <code>\n\s\*\s</code>
</dd>
<dt><span id="extract_md"
data-4search="ui/xbcomments.js:extract_md;func"><strong><code>extract_md</code></strong></span>
<code>(</code><em>txt</em><code>)</code></dt>
<dd>
Look for a markdown documentation block
</dd>
<dt><span id="process_file"
data-4search="ui/xbcomments.js:process_file;func"><strong><code>process_file</code></strong></span>
<code>(</code><em>filename, config</em><code>)</code></dt>
<dd>
Extract and process block comments of a file
</dd>
</dl>
</section>
</section>
</section>
<section id="releasing" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span>
Releasing</h1>
<p>Releases of the Anklang project are hosted on GitHub under <a
href="https://github.com/tim-janik/anklang/releases/">Anklang
Releases</a>. A release encompasses a distribution tarball that has the
release version number baked into the misc/version.sh script.</p>
<section id="versioning" class="level2" data-number="8.1">
<h2 data-number="8.1"><span class="header-section-number">8.1</span>
Versioning</h2>
<p>The Anklang project uses
<strong><code>MAJOR.MINOR.MICRO[.DEVEL][-SUFFIX]</code></strong> version
numbers with the folloing uses:</p>
<ul>
<li><strong><code>MAJOR</code></strong> - The major number is currently
0, so all bets are off. It is planned to signify major changes to
users.</li>
<li><strong><code>MINOR</code></strong> - The minor number indicates
significant changes, often these are user visible improvements.</li>
<li><strong><code>MICRO</code></strong> - The micro number increases
with every release.</li>
<li><strong><code>DEVEL</code></strong> - The devel part is optional and
increases with every new commit, it numbers builds between official
releases. The presence of the <code>[.DEVEL]</code> part indicates a
version ordered <em>after</em> its corresponding
<code>MAJOR.MINOR.MICRO</code> release.</li>
<li><strong><code>SUFFIX</code></strong> - An optional suffix is
sometimes used for e.g. release candidates. The presence of the
<code>[-SUFFIX]</code> part indicates a version ordered <em>before</em>
its corresponding <code>MAJOR.MINOR.MICRO</code> release.</li>
</ul>
<p>Git tags are used to store release versions, development versions are
derived from those tags similar to how <code>git describe</code> works.
The current version can always be obtained by invoking
<code>misc/version.sh</code>.</p>
</section>
<section id="release-assets" class="level2" data-number="8.2">
<h2 data-number="8.2"><span class="header-section-number">8.2</span>
Release Assets</h2>
<p>The script <code>misc/mkassets.sh</code> can be used to create and
clean up a release build directory and it triggers the necessary rules
to create a distribution tarball and to build the release assets. All
assets are built from the distribution tarball without any Git
dependency. Producing a distribution tarball depends on Git however.</p>
</section>
</section>
<section id="appendix" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span>
Appendix</h1>
<p> </p>
<section id="one-dimensional-cubic-interpolation" class="level2"
data-number="9.1">
<h2 data-number="9.1"><span class="header-section-number">9.1</span>
One-dimensional Cubic Interpolation</h2>
<p>With four sample values <span class="math inline">\(V_{0}\)</span>,
<span class="math inline">\(V_{1}\)</span>, <span
class="math inline">\(V_{2}\)</span> and <span
class="math inline">\(V_{3}\)</span>, cubic interpolation approximates
the curve segment connecting <span class="math inline">\(V_{1}\)</span>
and <span class="math inline">\(V_{2}\)</span>, by using the beginning
and ending slope, the curvature and the rate of curvature change to
construct a cubic polynomial.</p>
<p>The cubic polynomial starts out as:</p>
<ol class="example" type="1">
<li><span class="math inline">\(f(x) = w_{3} x^3 + w_{2} x^2 + w_{1} x +
w_{0}\)</span></li>
</ol>
<p>Where <span class="math inline">\(0 &lt;= x &lt;= 1\)</span>,
specifying the sample value of the curve segment between <span
class="math inline">\(V_{1}\)</span> and <span
class="math inline">\(V_{2}\)</span> to obtain.</p>
<p>To calculate the coefficients <span
class="math inline">\(w_{0},…,w_{3}\)</span>, we set out the following
conditions:</p>
<ol start="2" class="example" type="1">
<li><span class="math inline">\(f(0) = V_{1}\)</span></li>
<li><span class="math inline">\(f(1) = V_{2}\)</span></li>
<li><span class="math inline">\(f&#39;(0) = V_{1}&#39;\)</span></li>
<li><span class="math inline">\(f&#39;(1) = V_{2}&#39;\)</span></li>
</ol>
<p>We obtain <span class="math inline">\(V_{1}&#39;\)</span> and <span
class="math inline">\(V_{2}&#39;\)</span> from the respecting slope
triangles:</p>
<ol start="6" class="example" type="1">
<li><span class="math inline">\(V_{1}&#39; = \frac {V_{2} - V_{0}}
{2}\)</span></li>
<li><span class="math inline">\(V_{2}&#39; = \frac {V_{3} - V_{1}}
{2}\)</span></li>
</ol>
<p>With (6) → (4) and (7) → (5) we get:</p>
<ol start="8" class="example" type="1">
<li><span class="math inline">\(f&#39;(0) = \frac {V_{2} - V_{0}}
{2}\)</span></li>
<li><span class="math inline">\(f&#39;(1) = \frac {V_{3} - V_{1}}
{2}\)</span></li>
</ol>
<p>The derivation of <span class="math inline">\(f(x)\)</span> is:</p>
<ol start="10" class="example" type="1">
<li><span class="math inline">\(f&#39;(x) = 3 w_{3} x^2 + 2 w_{2} x +
w_{1}\)</span></li>
</ol>
<p>From <span class="math inline">\(x=0\)</span> → (1), i.e. (2), we
obtain <span class="math inline">\(w_{0}\)</span> and from <span
class="math inline">\(x=0\)</span> → (10), i.e. (8), we obtain <span
class="math inline">\(w_{1}\)</span>. With <span
class="math inline">\(w_{0}\)</span> and <span
class="math inline">\(w_{1}\)</span> we can solve the linear equation
system formed by (3) → (1) and (5) → (10) to obtain <span
class="math inline">\(w_{2}\)</span> and <span
class="math inline">\(w_{3}\)</span>.</p>
<p>(<span class="citation" data-cites="c_a_">@c_a_</span>)   (3) → (1):
  <span class="math inline">\(w_{3} + w_{2} + \frac {V_{2} - V_{0}} {2}
+ V_{1} = V_{2}\)</span> (<span class="citation"
data-cites="e_j_">@e_j_</span>)   (5) → (10):   <span
class="math inline">\(3 w_{3} + 2 w_{2} + \frac {V_{2} - V_{0}} {2} =
\frac {V_{3} - V_{1}} {2}\)</span></p>
<p>With the resulting coefficients:</p>
<p><span class="math display">\[
\begin{aligned}
    w_{0} &amp;= V_{1}
&amp;                                        &amp;(initial\:value)           \\
    w_{1} &amp;= \frac{V_{2} - V_{0}} {2}
&amp;                       &amp;(initial\:slope)           \\
    w_{2} &amp;= \frac{-V_{3} + 4 V_{2} - 5 V_{1} + 2 V_{0}} {2}
&amp;    &amp;(initial\:curvature)       \\
    w_{3} &amp;= \frac{V_{3} - 3 V_{2} + 3 V_{1} - V_{0}} {2}
&amp;       &amp;(rate\:change\:of\:curvature)
\end{aligned}
\]</span></p>
<p>Reformulating (1) to involve just multiplications and additions
(eliminating power), we get:</p>
<ol start="11" class="example" type="1">
<li><span class="math inline">\(f(x) = ((w_{3} x + w_{2}) x + w_{1}) x +
w_{0}\)</span></li>
</ol>
<p>Based on <span class="math inline">\(V_{0},…,V_{3}\)</span>, <span
class="math inline">\(w_{0},…,w_{3}\)</span> and (11), we can now
approximate all values of the curve segment between <span
class="math inline">\(V_{1}\)</span> and <span
class="math inline">\(V_{2}\)</span>.</p>
<p>However, for practical resampling applications where only a specific
precision is required, the number of points we need out of the curve
segment can be reduced to a finite amount. Lets assume we require <span
class="math inline">\(n\)</span> equally spread values of the curve
segment, then we can precalculate <span class="math inline">\(n\)</span>
sets of <span class="math inline">\(W_{0,…,3}[i]\)</span>, <span
class="math inline">\(i=[0,…,n]\)</span>, coefficients to speed up the
resampling calculation, trading memory for computational performance.
With <span class="math inline">\(w_{0,…,3}\)</span> in (1):</p>
<p><span class="math display">\[
\begin{alignedat} {2}
    f(x) \  &amp;= &amp;   \frac{V_{3} - 3 V_{2} + 3 V_{1} - V_{0}} 2
x^3 \  +  &amp; \\
            &amp;  &amp; \frac{-V_{3} + 4 V_{2} - 5 V_{1} + 2 V_{0}} 2
x^2 \ +  &amp; \\
            &amp;  &amp;                     \frac{V_{2} - V_{0}} 2 x
\  +  &amp; \\
            &amp;  &amp;                                   V1   \
\     &amp;
\end{alignedat}
\]</span></p>
<p>sorted for <span class="math inline">\(V_{0},…,V_{4}\)</span>, we
have:</p>
<ol start="12" class="example" type="1">
<li><span class="math display">\[\begin{aligned}
f(x) \  = \  &amp; V_{3} \  (0.5 x^3 - 0.5 x^2) \  +     &amp; \\
          &amp; V_{2} \  (-1.5 x^3 + 2 x^2 + 0.5 x) \  +  &amp; \\
          &amp; V_{1} \  (1.5 x^3 - 2.5 x^2 + 1) \  + &amp; \\
          &amp; V_{0} \  (-0.5 x^3 + x^2 - 0.5 x)     &amp;
\end{aligned}\]</span></li>
</ol>
<p>With (12) we can solve <span class="math inline">\(f(x)\)</span> for
all <span class="math inline">\(x = \frac i n\)</span>, where <span
class="math inline">\(i = [0, 1, 2, …, n]\)</span> by substituting <span
class="math inline">\(g(i) = f(\frac i n)\)</span> with</p>
<ol start="13" class="example" type="1">
<li><span class="math inline">\(g(i) = V_{3} W_{3}[i] + V_{2} W_{2}[i] +
V_{1} W_{1}[i] + V_{0} W_{0}[i]\)</span></li>
</ol>
<p>and using <span class="math inline">\(n\)</span> precalculated
coefficients <span class="math inline">\(W_{0,…,3}\)</span> according
to:</p>
<p><span class="math display">\[
\begin{alignedat}{4}
        m      &amp;= \frac i n                                \\
        W_{3}[i] &amp;=&amp;  0.5 m^3 &amp; - &amp; 0.5 m^2
&amp;         &amp;      \\
        W_{2}[i] &amp;=&amp; -1.5 m^3 &amp; + &amp;   2 m^2 &amp; + 0.5
m &amp;      \\
        W_{1}[i] &amp;=&amp;  1.5 m^3 &amp; - &amp; 2.5 m^2
&amp;         &amp; + 1  \\
        W_{0}[i] &amp;=&amp; -0.5 m^3 &amp; + &amp;     m^2 &amp; - 0.5
m &amp;
\end{alignedat}
\]</span></p>
<p>We now need to setup <span
class="math inline">\(W_{0,…,3}[0,…,n]\)</span> only once, and are then
able to obtain up to <span class="math inline">\(n\)</span>
approximation values of the curve segment between <span
class="math inline">\(V_{1}\)</span> and <span
class="math inline">\(V_{2}\)</span> with four multiplications and three
additions using (13), given <span
class="math inline">\(V_{0},…,V_{3}\)</span>.</p>
</section>
<section id="modifier-keys" class="level2" data-number="9.2">
<h2 data-number="9.2"><span class="header-section-number">9.2</span>
Modifier Keys</h2>
<p>There seems to be a lot of inconsistency in the behaviour of
modifiers (shift and/or control) with regards to GUI operations like
selections and drag and drop behaviour.</p>
<p>According to the Gtk+ implementation, modifiers relate to DND
operations according to the following list:</p>
<table>
<caption>GDK drag-and-drop modifier keys</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Modifier</th>
<th></th>
<th style="text-align: left;">Operation</th>
<th style="text-align: left;">Note / X-Cursor</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">none</td>
<td>→</td>
<td style="text-align: left;">copy</td>
<td style="text-align: left;">(else move (else link))</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>SHIFT</code></td>
<td>→</td>
<td style="text-align: left;">move</td>
<td style="text-align: left;"><code>GDK_FLEUR</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>CTRL</code></td>
<td>→</td>
<td style="text-align: left;">copy</td>
<td style="text-align: left;"><code>GDK_PLUS</code>,
<code>GDK_CROSS</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>SHIFT+CTRL</code></td>
<td>→</td>
<td style="text-align: left;">link</td>
<td style="text-align: left;"><code>GDK_UL_ANGLE</code></td>
</tr>
</tbody>
</table>
<p>Regarding selections, the following email provides a short
summary:</p>
<blockquote>
<pre><code>From: Tim Janik &lt;timj@gtk.org&gt;
To: Hacking Gnomes &lt;Gnome-Hackers@gnome.org&gt;
Subject: modifiers for the second selection
Message-ID: &lt;Pine.LNX.4.21.0207111747190.12292-100000@rabbit.birnet.private&gt;
Date: Thu, 11 Jul 2002 18:10:52 +0200 (CEST)

hi all,

in the course of reimplementing drag-selection for a widget,
i did a small survey of modifier behaviour in other (gnome/
gtk) programs and had to figure that there&#39;s no current
standard behaviour to adhere to:

for all applications, the first selection works as
expected, i.e. press-drag-release selects the region
(box) the mouse was draged over. also, starting a new
selection without pressing any modifiers simply replaces
the first one. differences occour when holding a modifier
(shift or ctrl) when starting the second selection.

Gimp:
Shift upon button press:        the new seleciton is added to the existing one
Ctrl upon button press:         the new selection is subtracted from the
                                existing one
Shift during drag:              the selection area (box or circle) has fixed
                                aspect ratio
Ctrl during drag:               the position of the initial button press
                                serves as center of the selected box/circle,
                                rather than the upper left corner

Gnumeric:
Shift upon button press:        the first selection is resized
Ctrl upon button press:         the new seleciton is added to the existing one

Abiword (selecting text regions):
Shift upon button press:        the first selection is resized
Ctrl upon button press:         triggers a compound (word) selection that
                                replaces the first selection

Mozilla (selecting text regions):
Shift upon button press:        the first selection is resized

Nautilus:
Shift or Ctrl upon buttn press: the new selection is added to or subtracted
                                from the first selection, depending on whether
                                the newly selected region was selected before.
                                i.e. implementing XOR integration of the newly
                                selected area into the first.

i&#39;m not pointing this out to start a flame war over what selection style
is good or bad and i do realize that different applications have
different needs (i.e. abiword does need compound selection, and
the aspect-ratio/centering style for gimp wouldn&#39;t make too much
sense for text), but i think for the benfit of the (new) users,
there should me more consistency regarding modifier association
with adding/subtracting/resizing/xoring to/from existing selections.

---
ciaoTJ</code></pre>
</blockquote>
</section>
</section>

<script type="text/javascript">
// This Source Code Form is licensed MPL-2.0: http://mozilla.org/MPL/2.0
window.addEventListener ("load", function() {
  // substitute dl:has(dl, ol, ul) selector
  for (const dl of document.body.querySelectorAll ('dl'))
    if (dl.querySelector ('dl, ol, ul') !== null)
      dl.setAttribute ('data-has-nestedlayout', 1);
});
</script>
</body>
</html>
